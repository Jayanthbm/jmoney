"use strict";(self.webpackChunkjmoney=self.webpackChunkjmoney||[]).push([[984],{4624(e,t,a){a.d(t,{A:()=>i});a(5043);var n=a(579);const i=e=>{let{message:t="No data",height:a=150,width:i=150,children:s}=e;return(0,n.jsxs)("div",{className:"no-data-card",children:[(0,n.jsx)("div",{className:"no-data-image",children:(0,n.jsxs)("svg",{width:i,height:a,viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("title",{children:"No data"}),(0,n.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[(0,n.jsxs)("g",{transform:"translate(24 31.67)",children:[(0,n.jsx)("ellipse",{fillOpacity:".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),(0,n.jsx)("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"}),(0,n.jsx)("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"}),(0,n.jsx)("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"}),(0,n.jsx)("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"})]}),(0,n.jsx)("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"}),(0,n.jsxs)("g",{transform:"translate(149.65 15.383)",fill:"#FFF",children:[(0,n.jsx)("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),(0,n.jsx)("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"})]})]})]})}),(0,n.jsxs)("div",{className:"no-data-description",children:[t,s]})]})}},6908(e,t,a){a.d(t,{A:()=>i});a(5043);var n=a(579);const i=e=>{let{title:t,subtitle:a,children:i,customStyles:s={}}=e;return(0,n.jsxs)("div",{className:"overview-card",style:s,children:[(0,n.jsxs)("div",{className:"overview-card-header",children:[(0,n.jsx)("h2",{className:"overview-card-title",children:t}),(0,n.jsx)("p",{className:"overview-card-subtitle",children:a})]}),(0,n.jsx)("div",{className:"overview-card-body",children:i})]})}},1794(e,t,a){a.d(t,{A:()=>l});var n=a(6756),i=(a(5043),a(184)),s=a(579);const l=e=>{let{transaction:t,onCardClick:a=()=>{}}=e;const{amount:l,category_name:r,category_icon:o,description:c,payee_name:d,payee_logo:m,type:v,transaction_timestamp:u,percentage:h=null,product_link:x=null}=t;return(0,s.jsxs)("div",{className:"transaction-card",onClick:a,children:[(0,s.jsxs)("div",{className:"transaction-left",children:[(0,s.jsx)("div",{className:"transaction-icon ".concat("Expense"===v?"expense":"income"),children:(0,n.sH)(o)}),(0,s.jsxs)("div",{className:"transaction-details",children:[(0,s.jsx)("div",{className:"category-name",children:r}),c&&(0,s.jsx)("div",{className:"description",children:c}),u&&(0,s.jsx)("div",{className:"timestamp",children:(0,n.Ey)(u)}),(0,s.jsx)("div",{className:"payee-info",children:(m||x)&&(0,s.jsxs)(s.Fragment,{children:[m&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{src:m,alt:d,className:"transaction-payee-logo"}),(0,s.jsx)("span",{className:"transaction-payee-name",children:d})]}),x&&(0,s.jsx)("a",{href:x,target:"_blank",rel:"noopener noreferrer",style:{color:"#007bff",cursor:"pointer"},onClick:e=>e.stopPropagation(),children:(0,s.jsx)(i.EQc,{size:14,color:"#007bff",title:"Product Link"})})]})})]})]}),(0,s.jsxs)("div",{className:"transaction-amount-section",children:[(0,s.jsx)("div",{className:"transaction-amount ".concat("Expense"===v?"expense":"income"),children:(0,n.mC)(Number(l))}),null!==h&&(0,s.jsxs)("div",{className:"transaction-percentage",children:[h,"%"]})]})]})}},9984(e,t,a){a.d(t,{A:()=>i});a(5043);var n=a(579);const i=e=>{let{progress:t=0,text:a="",subtext:i="",pathColor:s="#3b82f6",textColor:l="#000",fontSize:r="1rem",size:o=100,strokeWidth:c=10}=e;const d=(o-c)/2,m=2*Math.PI*d,v=m*(1-t/100);return(0,n.jsxs)("svg",{width:o,height:o,viewBox:"0 0 ".concat(o," ").concat(o),children:[(0,n.jsx)("circle",{cx:o/2,cy:o/2,r:d,fill:"none",stroke:"#e5e7eb",strokeWidth:c}),(0,n.jsx)("circle",{cx:o/2,cy:o/2,r:d,fill:"none",stroke:s,strokeWidth:c,strokeDasharray:m,strokeDashoffset:v,strokeLinecap:"round",transform:"rotate(-90 ".concat(o/2," ").concat(o/2,")"),style:{transition:"stroke-dashoffset 0.5s ease"}}),(0,n.jsx)("text",{x:"50%",y:i?"40%":"50%",textAnchor:"middle",dominantBaseline:"central",fill:l,fontSize:r,fontWeight:"bold",children:a}),i&&(0,n.jsx)("text",{x:"50%",y:"60%",textAnchor:"middle",dominantBaseline:"central",fill:l,fontSize:r,fontWeight:"bold",children:i})]})}},5533(e,t,a){a.d(t,{A:()=>l});var n=a(5751),i=a(6756),s=a(579);const l=e=>{let{end:t}=e;return(0,s.jsx)(n.Ay,{end:t,duration:1.5,formattingFn:i.mC})}},1305(e,t,a){a.d(t,{A:()=>l});var n=a(5043),i=a(5843),s=a(579);const l=e=>{let{value:t=0,color:a="#3ecf8e",height:l="10px"}=e;const r=(0,n.useRef)(null),{ref:o,inView:c}=(0,i.Wx)();return(0,n.useEffect)((()=>{if(c&&r.current){const e="".concat(Math.min(t,100),"%");r.current.style.width=e,r.current.classList.add("animate")}}),[c,t]),(0,n.useEffect)((()=>{r.current&&!c&&(r.current.style.width="0%",r.current.classList.remove("animate"))}),[c]),(0,s.jsx)("div",{className:"progress-bar-container",ref:o,style:{height:l},children:(0,s.jsx)("div",{className:"progress-bar-fill",ref:r,style:{backgroundColor:a}})})}},6405(e,t,a){a.d(t,{A:()=>i});a(5043);var n=a(579);const i=e=>{let{text:t="Loading Transactions..."}=e;return(0,n.jsxs)("div",{className:"inline-loader",children:[(0,n.jsx)("div",{className:"spinner"}),(0,n.jsx)("span",{className:"loader-text",children:t})]})}},6380(e,t,a){a.d(t,{A:()=>s});var n=a(9379),i=(a(5043),a(579));const s=e=>{let{variant:t="text",width:a,height:s,className:l="",count:r=1,style:o={}}=e;const c=Array.from({length:r});return(0,i.jsx)(i.Fragment,{children:c.map(((e,r)=>{const c="skeleton skeleton-".concat(t," ").concat(l),d=(0,n.A)({width:a,height:s},o);return(0,i.jsx)("div",{className:c,style:d,"data-testid":"skeleton-loader"},r)}))})}},1486(e,t,a){a.d(t,{A:()=>s});var n=a(3261),i=a(579);const s=e=>{let{options:t,value:a,onChange:s,isDisabled:l=!1,isMulti:r=!1,placeholder:o="",isSearchable:c=!1}=e;return(0,i.jsx)(n.Ay,{className:"react-select-container",classNamePrefix:"react-select",options:t,value:a,onChange:s,isDisabled:l,isMulti:r,placeholder:o,isSearchable:c})}},4770(e,t,a){a.d(t,{A:()=>l});var n=a(6756),i=a(1486),s=(a(5043),a(579));const l=e=>{let{showYear:t=!0,showMonth:a=!0,yearValue:l,onYearChange:r,monthValue:o,onMonthChange:c,disabled:d}=e;return(0,s.jsxs)("div",{className:"filters-wrapper",children:[t&&(0,s.jsx)(i.A,{options:(0,n.gD)(),value:l,onChange:r,isDisabled:d}),a&&(0,s.jsx)(i.A,{options:(0,n.Ly)(l.value),value:o,onChange:c,isDisabled:d})]})}},8515(e,t,a){a.d(t,{A:()=>w});var n=a(184),i=a(5043),s=a(6756),l=a(2024),r=a(8861),o=a(1180),c=a(6992),d=a(6102),m=a(7869),v=a(379),u=a(579);const h=e=>{let{data:t,colors:a}=e;return(0,u.jsx)(o.u,{width:"100%",height:250,children:(0,u.jsxs)(c.r,{children:[(0,u.jsx)(d.Fq,{data:t,dataKey:"value",nameKey:"name",innerRadius:60,outerRadius:100,paddingAngle:3,label:!1,children:null===t||void 0===t?void 0:t.map(((e,t)=>(0,u.jsx)(m.f,{fill:a[t%a.length]},"cell-".concat(t))))}),(0,u.jsx)(v.m,{})]})})};var x=a(6405),g=a(4770),p=a(4624),j=a(1794),y=a(2916),N=a(7077),f=a(9657);const w=e=>{let{title:t,showMonthSelect:a=!0,onBack:o}=e;const c=(0,f.Ub)({maxWidth:768}),[d,m]=(0,i.useState)(!0),[v,w]=(0,i.useState)("Expense"),[b,A]=(0,i.useState)({value:(new Date).getMonth(),label:(0,s.Ly)()[(new Date).getMonth()].label}),[S,F]=(0,i.useState)({value:(new Date).getFullYear(),label:(new Date).getFullYear().toString()}),[C,_]=(0,i.useState)([]),[k,D]=(0,i.useState)("summary"),[E,M]=(0,i.useState)([]),[L,O]=(0,i.useState)(null),[z,I]=(0,i.useState)(0),[V,Y]=(0,i.useState)(!0);(0,i.useEffect)((()=>{c&&Y(!1)}),[c]),(0,i.useEffect)((()=>{(async()=>{m(!0);const e=await(0,N.r2)();let t;t=a?e.filter((e=>{const t=new Date(e.date);return e.type===v&&t.getMonth()===b.value&&t.getFullYear()===S.value})):e.filter((e=>{const t=new Date(e.date);return e.type===v&&t.getFullYear()===S.value}));const n=t.reduce(((e,t)=>e+t.amount),0),i={};t.forEach((e=>{i[e.category_name]||(i[e.category_name]={amount:0,icon:e.category_icon,transactions:[]}),i[e.category_name].amount+=e.amount,i[e.category_name].transactions.push(e)}));const s=Object.entries(i).map((e=>{let[t,a]=e;return{category_name:t,category_icon:a.icon,amount:a.amount,percentage:Math.round(a.amount/n*100),type:v,transactions:a.transactions}})).sort(((e,t)=>t.amount-e.amount));_(s),m(!1)})()}),[v,b,S,a]);return(0,u.jsxs)(u.Fragment,{children:["summary"===k&&(0,u.jsxs)(l.A,{title:t,onBack:o,children:[(0,u.jsxs)("div",{className:"toggle-button-group",children:[(0,u.jsx)("button",{onClick:()=>w("Expense"),className:"Expense"===v?"active":"",children:"Expense"}),(0,u.jsx)("button",{onClick:()=>w("Income"),className:"Income"===v?"active":"",children:"Income"})]}),(0,u.jsx)(g.A,{yearValue:S,onYearChange:e=>F(e),monthValue:b,onMonthChange:e=>A(e),disabled:d,showMonth:a}),(0,u.jsx)(u.Fragment,{children:d?(0,u.jsx)(x.A,{text:"Loading Categories"}):0===(null===C||void 0===C?void 0:C.length)?(0,u.jsx)(p.A,{message:"No transactions",height:"150",width:"200"}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"align-right",children:(0,u.jsx)(r.A,{text:c?null:V?"Hide Chart":"Show Chart",onClick:()=>{Y(!V)},icon:V?(0,u.jsx)(n.mx3,{}):(0,u.jsx)(n.v$b,{})})}),V&&(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(h,{data:null===C||void 0===C?void 0:C.map((e=>({value:null===e||void 0===e?void 0:e.percentage,name:null===e||void 0===e?void 0:e.category_name}))),colors:(0,s.Wl)(C.length)})}),(0,u.jsx)("div",{className:"transaction-card-list",children:null===C||void 0===C?void 0:C.map(((e,t)=>(0,u.jsx)(j.A,{transaction:e,onCardClick:()=>{D("transactions"),M((0,s.SS)(e.transactions)),O(e.category_name),I(e.amount),sessionStorage.setItem("transactionsViewMode",JSON.stringify(!0))}},t)))})]})})]}),"transactions"===k&&(0,u.jsx)(l.A,{title:t,onBack:()=>{D("summary"),M({})},children:(0,u.jsx)(y.A,{name:L,amount:z,transactions:E})})]})}},2916(e,t,a){a.d(t,{A:()=>r});var n=a(6756),i=a(4624),s=(a(5043),a(1794)),l=a(579);const r=e=>{var t,a;let{name:r,amount:o,transactions:c}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"date-summary-bar",children:[(0,l.jsx)("div",{style:{display:"flex"},children:r?(0,l.jsx)("div",{className:"summary-date",children:r}):(0,l.jsx)(l.Fragment,{})}),o?(0,l.jsx)("div",{className:"summary-amount",children:(0,n.mC)(o)}):(0,l.jsx)(l.Fragment,{})]}),c&&(0,l.jsxs)("div",{className:"transaction-page-wrapper",children:[null===Object||void 0===Object||null===(t=Object.entries(c))||void 0===t?void 0:t.map((e=>{let[t,a]=e;return(0,l.jsxs)("div",{className:"transaction-group",children:[(0,l.jsx)("h2",{className:"transaction-date-header",children:(0,n.Qm)(t)}),(0,l.jsx)("div",{className:"transaction-card-list",children:null===a||void 0===a?void 0:a.map((e=>(0,l.jsx)(s.A,{transaction:e},e.id)))})]},t)})),0===(null===Object||void 0===Object||null===(a=Object.entries(c))||void 0===a?void 0:a.length)&&(0,l.jsx)(i.A,{message:"No transactions"})]})]})}},2771(e,t,a){a.d(t,{A:()=>i});var n=a(5043);const i=()=>{const[e,t]=(0,n.useState)(document.documentElement.getAttribute("data-theme")||"light");return(0,n.useEffect)((()=>{const e=new MutationObserver((()=>{const e=document.documentElement.getAttribute("data-theme");t(e||"light")}));return e.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),()=>e.disconnect()}),[]),e}},1811(e,t,a){a.r(t),a.d(t,{default:()=>Q});var n=a(9379),i=a(5043),s=a(4912),l=a(3695),r=a(8344),o=a(3621),c=a(9992),d=a(2024),m=a(9984),v=a(6908),u=a(6756),h=a(2771),x=a(6380),g=a(579);const p=e=>{let{data:t,loading:a}=e;const n=(0,h.A)(),i="Limit: ".concat((0,u.mC)(null===t||void 0===t?void 0:t.daily_limit));let s="green-text",l="REMAINING";return(null===t||void 0===t?void 0:t.remaining)<0&&(s="red-text",l="OVERSPENT"),(0,g.jsx)(v.A,{title:"Daily Limit",subtitle:i,children:(0,g.jsx)("div",{className:"daily-limit-container",children:a?(0,g.jsx)(x.A,{count:2,keyName:"daily-limit"}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"daily-limit-section",children:(null===t||void 0===t?void 0:t.remaining_percentage)>0?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"daily-limit-label",children:l}),(0,g.jsxs)("div",{className:"daily-limit-value ".concat(s),children:["\u20b9 ",(0,u.mC)((null===t||void 0===t?void 0:t.remaining)||0)]})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"daily-limit-label",children:"OVERSPENT"}),(0,g.jsx)("div",{className:"daily-limit-value red-text",children:(0,u.mC)(((null===t||void 0===t?void 0:t.spent)||0)-((null===t||void 0===t?void 0:t.daily_limit)||0))})]})}),(0,g.jsx)("div",{className:"divider"}),(0,g.jsxs)("div",{className:"daily-limit-section",children:[(0,g.jsx)("div",{className:"daily-limit-label",children:"SPENT"}),(0,g.jsx)("div",{className:"daily-limit-value red-text",children:(0,u.mC)((null===t||void 0===t?void 0:t.spent)||0)})]}),(0,g.jsx)("div",{className:"daily-limit-section progress-section",children:(0,g.jsx)(m.A,{size:70,progress:(null===t||void 0===t?void 0:t.remaining_percentage)>0?t.remaining_percentage:100,text:(null===t||void 0===t?void 0:t.remaining_percentage)>0&&t.remaining>0?"".concat(t.remaining_percentage,"%"):"\u26a0\ufe0e",pathColor:(null===t||void 0===t?void 0:t.remaining_percentage)>0&&t.remaining>0?"#3ecf8e":"#ef4444",fontSize:(null===t||void 0===t?void 0:t.remaining_percentage)<0?"1.1rem":"0.8rem",textColor:(null===t||void 0===t?void 0:t.remaining_percentage)<0?"#ef4444":"dark"===n?"#f1f1f1":"#374151"})})]})})})},j=i.memo(p);var y=a(6405),N=a(4624),f=a(1794),w=a(7077);const b=e=>{let{dailyLimitData:t,title:a,onBack:n}=e;const[s,l]=(0,i.useState)([]),[o,c]=(0,i.useState)(!0),p=(0,h.A)();(0,i.useEffect)((()=>{(async()=>{c(!0);let e=(await(0,w.r2)()).filter((e=>"Expense"===e.type&&(0,r.c)(new Date(e.date))));e=e.sort(((e,t)=>new Date(t.transaction_timestamp)-new Date(e.transaction_timestamp))),l(e),c(!1)})()}),[]);let j="green-text",b="REMAINING";return(null===t||void 0===t?void 0:t.remaining)<0&&(j="red-text",b="OVERSPENT"),(0,g.jsx)(d.A,{title:a,onBack:n,children:(0,g.jsxs)("div",{className:"daily-limit-view",children:[(0,g.jsx)("div",{className:"overview-card-wrapper",children:(0,g.jsx)(v.A,{title:"Daily Limit",subtitle:"Limit: ".concat((0,u.mC)(null===t||void 0===t?void 0:t.daily_limit)),children:(0,g.jsxs)("div",{className:"daily-limit-container",children:[(0,g.jsx)("div",{className:"daily-limit-section",children:(null===t||void 0===t?void 0:t.remaining_percentage)>0?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"daily-limit-label",children:b}),(0,g.jsx)("div",{className:"daily-limit-value ".concat(j),children:(0,u.mC)((null===t||void 0===t?void 0:t.remaining)||0)})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"daily-limit-label",children:"OVERSPENT"}),(0,g.jsx)("div",{className:"daily-limit-value red-text",children:(0,u.mC)((null===t||void 0===t?void 0:t.spent)-t.daily_limit)})]})}),(0,g.jsx)("div",{className:"divider"}),(0,g.jsxs)("div",{className:"daily-limit-section",children:[(0,g.jsx)("div",{className:"daily-limit-label",children:"SPENT"}),(0,g.jsx)("div",{className:"daily-limit-value red-text",children:(0,u.mC)((null===t||void 0===t?void 0:t.spent)||0)})]}),(0,g.jsx)("div",{className:"daily-limit-section progress-section",children:(0,g.jsx)(m.A,{progress:(null===t||void 0===t?void 0:t.remaining_percentage)>0?t.remaining_percentage:100,text:(null===t||void 0===t?void 0:t.remaining_percentage)>0&&t.remaining>0?"".concat(t.remaining_percentage,"%"):"\u26a0\ufe0e",pathColor:(null===t||void 0===t?void 0:t.remaining_percentage)>0&&t.remaining>0?"#3ecf8e":"#ef4444",fontSize:(null===t||void 0===t?void 0:t.remaining_percentage)<0?"1.5rem":"1rem",textColor:(null===t||void 0===t?void 0:t.remaining_percentage)<0?"#ef4444":"dark"===p?"#f1f1f1":"#374151"})})]})})}),(0,g.jsxs)("div",{className:"transaction-list-wrapper",children:[(0,g.jsx)("div",{className:"date-summary-bar",children:(0,g.jsx)("div",{className:"summary-date",children:"Today"})}),o?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(y.A,{}),(0,g.jsx)(x.A,{count:3,keyName:"daily-limit-view",height:70})]}):0===(null===s||void 0===s?void 0:s.length)?(0,g.jsx)(N.A,{message:"No expenses today",height:"150",width:"150"}):(0,g.jsx)(g.Fragment,{children:null===s||void 0===s?void 0:s.map((e=>(0,g.jsx)(f.A,{transaction:e},e.id)))})]})]})})};var A=a(5533);const S=e=>{let{data:t}=e;const a=(0,h.A)(),n=(null===t||void 0===t?void 0:t.days_in_month)||30,i=(null===t||void 0===t?void 0:t.today)||0,s=(null===t||void 0===t?void 0:t.remaining_days_percentage)||0,l=(null===t||void 0===t?void 0:t.remaining_days)||0;return(0,g.jsx)(v.A,{title:"Pay Day",subtitle:"Days until next salary",children:(0,g.jsxs)("div",{className:"payday-container",children:[(0,g.jsxs)("div",{className:"payday-info",children:[(0,g.jsx)("div",{className:"payday-date",children:(null===t||void 0===t?void 0:t.date)||""}),(0,g.jsx)("div",{className:"dot-grid",children:Array.from({length:n}).map(((e,t)=>(0,g.jsx)("div",{className:"dot ".concat(t+1<i?"dot-past":"dot-future")},t)))})]}),(0,g.jsx)("div",{className:"payday-progress",children:(0,g.jsx)(m.A,{progress:100-s,text:"".concat(l),subtext:"DAYS",pathColor:"#139af5",textColor:"dark"===a?"#5d9bff":"#2c6c99"})})]})})},F=i.memo(S);a(6097);var C=a(8861),_=a(1003),k=a(6720),D=a(6465),E=a(9657);const M=e=>{let{title:t,onBack:a}=e;const n=(0,E.Ub)({maxWidth:768}),[s,l]=(0,i.useState)(!0),[r,o]=(0,i.useState)(new Date),[c,m]=(0,i.useState)(new Date),[v,h]=(0,i.useState)([]),[p,j]=(0,i.useState)(null),b=new Date;(0,i.useEffect)((()=>{(async()=>{l(!0);const e=await(0,w.r2)();if(e.length>0){const t=e.sort(((e,t)=>new Date(e.date)-new Date(t.date)));j(new Date(t[0].date))}const t=e.filter((e=>(0,D.r)(new Date(e.date),r))).sort(((e,t)=>new Date(t.transaction_timestamp)-new Date(e.transaction_timestamp)));h(t),l(!1)})()}),[r]);const A=v.filter((e=>"Income"===e.type)).reduce(((e,t)=>e+t.amount),0)-v.filter((e=>"Expense"===e.type)).reduce(((e,t)=>e+t.amount),0);return(0,g.jsxs)(d.A,{title:t,onBack:a,children:[(0,g.jsx)("div",{className:"align-right",children:!(0,D.r)(r,b)&&(0,g.jsx)(C.A,{onClick:()=>{o(b),m(b)},text:n?null:"Today",icon:(0,g.jsx)(k.MdToday,{})})}),(0,g.jsx)("div",{className:"calendar-wrapper",children:(0,g.jsx)(_.Ay,{value:r,onChange:e=>o(e),minDate:p,maxDate:b,activeStartDate:c,onActiveStartDateChange:e=>{let{activeStartDate:t}=e;return m(t)}})}),(0,g.jsxs)("div",{className:"date-summary-bar",children:[(0,g.jsx)("div",{className:"summary-date",children:(0,u.Qm)(r)}),(null===v||void 0===v?void 0:v.length)>0&&(0,g.jsx)("div",{className:"summary-amount",children:(0,u.mC)(A)})]}),(0,g.jsx)("div",{className:"transaction-list-wrapper",children:s?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(y.A,{}),(0,g.jsx)(x.A,{count:1,keyName:"payday-view",height:70})]}):0===(null===v||void 0===v?void 0:v.length)?(0,g.jsx)(N.A,{message:"No transactions on this date",height:"100",width:"150"}):null===v||void 0===v?void 0:v.map((e=>(0,g.jsx)(f.A,{transaction:e},e.id)))})]})};var L=a(1305);const O=e=>{let{data:t,loading:a}=e;let n="#3ecf8e",i="big-income-text";return(null===t||void 0===t?void 0:t.spent_percentage)>100&&(n=" #ef4444",i="big-expense-text"),(0,g.jsx)(v.A,{title:"Remaining for Period",subtitle:(null===t||void 0===t?void 0:t.period)||"",customStyles:{cursor:"default"},children:a?(0,g.jsx)(x.A,{count:2,keyName:"remaining-for-period"}):(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:i,children:(0,g.jsx)(A.A,{end:(null===t||void 0===t?void 0:t.remaining)||0})}),(0,g.jsx)(L.A,{value:(null===t||void 0===t?void 0:t.spent_percentage)||0,color:n})]})})},z=i.memo(O),I="#f87171",V=e=>{let{title:t,subtitle:a,income:n,expense:i,percentage:s,onClick:l,loading:r}=e;const o=(0,h.A)();return(0,g.jsx)("div",{className:"overview-card-wrapper",onClick:l,children:(0,g.jsx)(v.A,{title:t,subtitle:a,children:r?(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{className:"top-categories-donut",children:[(0,g.jsx)("div",{className:"category-labels",children:(0,g.jsx)(x.A,{count:2,keyName:"stat-card"})}),(0,g.jsx)("div",{className:"category-donut-chart",children:(0,g.jsx)(x.A,{count:1,keyName:"stat-card-donut",variant:"circular",width:"100%",height:"100%"})})]})}):(0,g.jsxs)("div",{className:"stat-card-container",children:[(0,g.jsxs)("div",{className:"stat-card-numbers",children:[(0,g.jsxs)("div",{className:"stat-row",children:[(0,g.jsx)("div",{className:"stat-amount red-text",children:(0,u.mC)(i)}),(0,g.jsx)("div",{className:"stat-label",children:"EXPENSE"})]}),(0,g.jsxs)("div",{className:"stat-row",children:[(0,g.jsx)("div",{className:"stat-amount green-text",children:(0,u.mC)(n)}),(0,g.jsx)("div",{className:"stat-label",children:"INCOME"})]})]}),(0,g.jsx)("div",{className:"stat-chart",children:(0,g.jsx)(m.A,{progress:Math.round(s),text:"".concat(Math.round(s),"%"),subtext:"spent",pathColor:I,textColor:"dark"===o?"#f1f1f1":"#374151"})})]})})})};var Y=a(8515);const P=e=>e*Math.PI/180,T=e=>{let{data:t,colors:a,radius:n=45,strokeWidth:i=10,size:s=100}=e;const l=null===t||void 0===t?void 0:t.reduce(((e,t)=>e+t.value),0);let r=0;return(0,g.jsx)("svg",{viewBox:"0 0 ".concat(s," ").concat(s),width:"100%",height:"100%",children:null===t||void 0===t?void 0:t.map(((e,t)=>{const o=e.value/l,c=360*o,d=r,m=r+c;r+=c;const v=((e,t,a,n,i)=>{const s={x:e+a*Math.cos(P(n)),y:t+a*Math.sin(P(n))},l={x:e+a*Math.cos(P(i)),y:t+a*Math.sin(P(i))},r=i-n<=180?"0":"1";return"M ".concat(s.x," ").concat(s.y,"\n          A ").concat(a," ").concat(a," 0 ").concat(r," 1 ").concat(l.x," ").concat(l.y)})(s/2,s/2,n,d-90,m-90);return(0,g.jsx)("path",{d:v,fill:"none",strokeWidth:i,strokeDasharray:"".concat((2*o*Math.PI*n).toFixed(6)),strokeDashoffset:"0",strokeLinecap:"round",stroke:a[t],style:{transition:"stroke-dashoffset 500ms ease-out"},children:(0,g.jsx)("title",{children:e.label})},t)}))})},B=["#3b82f6","#10b981","#9ca3af"],R=e=>{var t;let{data:a,loading:n}=e;const i=(null===a||void 0===a?void 0:a.topCategories)||[],s=(null===a||void 0===a||null===(t=a.remainingForPeriod)||void 0===t?void 0:t.period)||"";return(0,g.jsx)(v.A,{title:"Top Categories",subtitle:s,children:n?(0,g.jsxs)("div",{className:"top-categories-donut",children:[(0,g.jsx)("div",{className:"category-labels",children:(0,g.jsx)(x.A,{count:3,keyName:"top-categories"})}),(0,g.jsx)("div",{className:"category-donut-chart",children:(0,g.jsx)(x.A,{count:1,keyName:"top-categories",variant:"circular",width:"100%",height:"100%"})})]}):(0,g.jsx)(g.Fragment,{children:i.length>0?(0,g.jsxs)("div",{className:"top-categories-donut",children:[(0,g.jsx)("div",{className:"category-labels",children:i.map(((e,t)=>(0,g.jsxs)("div",{className:"category-label-item",children:[(0,g.jsx)("span",{className:"category-dot",style:{backgroundColor:B[t]}}),(0,g.jsxs)("div",{className:"category-text",children:[(0,g.jsx)("div",{className:"category-name",children:e.name}),(0,g.jsxs)("div",{className:"category-value",children:[(0,u.mC)((null===e||void 0===e?void 0:e.amount)||0)," |"," ",(null===e||void 0===e?void 0:e.percentage)||0,"%"]})]})]},t)))}),(0,g.jsx)("div",{className:"category-donut-chart",children:(0,g.jsx)(T,{data:i.map((e=>({value:null===e||void 0===e?void 0:e.percentage}))),colors:B})})]}):(0,g.jsx)(N.A,{message:"No data available",height:"100",width:"150"})})})},W=i.memo(R);var H=a(3156);const{LAST_TRANSACTION_FETCH:G}=(0,u.RW)(),Q=()=>{var e,t,a,m,h,p,y,N,f;const[S,C]=(0,i.useState)(null),[_,D]=(0,i.useState)(!0),[E,L]=(0,i.useState)("Overview"),[O,I]=(0,i.useState)(!1),[P,T]=(0,i.useState)(!1),B=e=>{const t=new Date,a=(0,s.w)(t),i=(0,l.p)(t),c=e=>e.reduce(((e,t)=>e+t.amount),0),d=c(e.filter((e=>"Income"===e.type&&new Date(e.date)>=a&&new Date(e.date)<=i))),m=e.filter((e=>"Expense"===e.type&&new Date(e.date)>=a&&new Date(e.date)<=i)),v=c(m),h={period:"".concat(a.getDate().toString().padStart(2,"0"),"/").concat((a.getMonth()+1).toString().padStart(2,"0"),"/").concat(a.getFullYear().toString().slice(2)," - ").concat(i.getDate().toString().padStart(2,"0"),"/").concat((i.getMonth()+1).toString().padStart(2,"0"),"/").concat(i.getFullYear().toString().slice(2)),remaining:parseFloat((d-v).toFixed(2)),spent_percentage:0===d?0:parseFloat((v/d*100).toFixed(0))},x=c(e.filter((e=>"Expense"===e.type&&(0,r.c)(new Date(e.date))))),g=Math.floor((i-t)/864e5)+1,p=g>0?(d-v+x)/g:0,j=p-x,y={daily_limit:parseFloat(p.toFixed(2)),spent:parseFloat(x.toFixed(2)),remaining:parseFloat(j.toFixed(2)),remaining_percentage:0===p?0:parseFloat((j/p*100).toFixed(2))},N={};m.forEach((e=>{N[e.category_name]||(N[e.category_name]=0),N[e.category_name]+=e.amount}));const f=Object.entries(N).map((e=>{let[t,a]=e;return{name:t,amount:a}})).sort(((e,t)=>t.amount-e.amount)),w=f.slice(0,2),b=c(f.slice(2)),A=[...w,...b>0?[{name:"Other",amount:b}]:[]].map((e=>(0,n.A)((0,n.A)({},e),{},{percentage:0===v?0:parseFloat((e.amount/v*100).toFixed(2)),period:"".concat(a.getDate().toString().padStart(2,"0"),"/").concat((a.getMonth()+1).toString().padStart(2,"0"),"/").concat(a.getFullYear().toString().slice(2)," - ").concat(i.getDate().toString().padStart(2,"0"),"/").concat((i.getMonth()+1).toString().padStart(2,"0"),"/").concat(i.getFullYear().toString().slice(2))}))),S={period:"".concat(t.toLocaleString("default",{month:"long"})," ").concat(t.getFullYear()),income:parseFloat(d.toFixed(2)),expense:parseFloat(v.toFixed(2)),spent_percentage:parseFloat((v/d*100).toFixed(2))},F=e.filter((e=>"Income"===e.type&&(0,o.e)(new Date(e.date)))),_=e.filter((e=>"Expense"===e.type&&(0,o.e)(new Date(e.date)))),k=c(F),D=c(_),E={period:t.getFullYear(),income:parseFloat(k.toFixed(2)),expense:parseFloat(D.toFixed(2)),spent_percentage:parseFloat((D/k*100).toFixed(2))},M={amount:parseFloat(e.reduce(((e,t)=>"Income"===t.type?e+t.amount:e-t.amount),0).toFixed(3))},L=(0,u.Hw)();C({remainingForPeriod:h,dailyLimit:y,topCategories:A,current_month:S,current_year:E,networth:M,payDay:L})},R=(0,i.useCallback)((async()=>{D(!0);const e=await(0,w.r2)();return B(e),D(!1),I(!0),!0}),[]);(0,i.useEffect)((()=>{R()}),[R]),(0,i.useEffect)((()=>{O&&(T(!0),async function(){if(await(0,c.Js)()){const e=await(0,c._r)();localStorage.setItem(G,Date.now()),B(e)}}().then((()=>T(!1))))}),[O]);const[Q,J]=(0,i.useState)("overview"),K=()=>{J("overview"),L("Overview")};return(0,g.jsxs)(g.Fragment,{children:["overview"===Q&&(0,g.jsxs)(d.A,{title:E,onBack:"overview"!==Q?()=>{J("overview"),L("Overview")}:null,children:[(0,g.jsx)("div",{className:"sync-status",children:(0,g.jsx)("small",{className:"sync-time",children:P?(0,g.jsxs)("span",{style:{display:"flex",gap:5},children:[(0,g.jsx)(k.MdSync,{className:"syncing-icon"}),"Syncing"]}):(0,g.jsxs)("span",{style:{display:"flex",gap:5},children:[(0,g.jsx)(H.cxC,{}),"Synced"]})})}),(0,g.jsxs)("div",{className:"overview-container",children:[(0,g.jsx)("div",{className:"overview-card-wrapper",children:(0,g.jsx)(z,{data:null===S||void 0===S?void 0:S.remainingForPeriod,loading:_})}),(0,g.jsx)("div",{className:"overview-card-wrapper",onClick:()=>{J("dailyLimit"),L("Daily Limit")},children:(0,g.jsx)(j,{data:null===S||void 0===S?void 0:S.dailyLimit,loading:_})}),(0,g.jsx)("div",{className:"overview-card-wrapper",onClick:()=>{J("payDay"),L("Calendar View")},children:(0,g.jsx)(F,{data:null===S||void 0===S?void 0:S.payDay})}),(0,g.jsx)("div",{className:"overview-card-wrapper",onClick:()=>{var e;(null===S||void 0===S||null===(e=S.topCategories)||void 0===e?void 0:e.length)>0&&(J("topCategories"),L("Top Categories"))},children:(0,g.jsx)(W,{data:S,loading:_})}),(0,g.jsx)(V,{title:"This Month",subtitle:null===S||void 0===S||null===(e=S.current_month)||void 0===e?void 0:e.period,expense:null===S||void 0===S||null===(t=S.current_month)||void 0===t?void 0:t.expense,income:null===S||void 0===S||null===(a=S.current_month)||void 0===a?void 0:a.income,percentage:null===S||void 0===S||null===(m=S.current_month)||void 0===m?void 0:m.spent_percentage,onClick:()=>{J("thisMonth"),L("Summary For Month")},loading:_}),(0,g.jsx)(V,{title:"Current Year",subtitle:null===S||void 0===S||null===(h=S.current_year)||void 0===h?void 0:h.period,expense:null===S||void 0===S||null===(p=S.current_year)||void 0===p?void 0:p.expense,income:null===S||void 0===S||null===(y=S.current_year)||void 0===y?void 0:y.income,percentage:null===S||void 0===S||null===(N=S.current_year)||void 0===N?void 0:N.spent_percentage,onClick:()=>{J("currentYear"),L("Summary For Year")},loading:_}),(0,g.jsx)("div",{className:"overview-card-wrapper",children:(0,g.jsx)(v.A,{title:"Net Worth",subtitle:"ALL TIME",customStyles:{cursor:"default"},children:(0,g.jsx)("div",{children:(0,g.jsx)("div",{className:"big-income-text",children:_?(0,g.jsx)(x.A,{count:1,keyName:"networth"}):(0,g.jsx)(A.A,{end:(null===S||void 0===S||null===(f=S.networth)||void 0===f?void 0:f.amount)||0})})})})})]})]}),"dailyLimit"===Q&&(0,g.jsx)(b,{dailyLimitData:null===S||void 0===S?void 0:S.dailyLimit,title:E,onBack:K}),"payDay"===Q&&(0,g.jsx)(M,{title:E,onBack:K}),("topCategories"===Q||"thisMonth"===Q||"currentYear"===Q)&&(0,g.jsx)(Y.A,{title:E,onBack:K,showMonthSelect:"currentYear"!==Q})]})}}}]);
//# sourceMappingURL=984.2203a6e7.chunk.js.map