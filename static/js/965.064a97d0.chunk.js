"use strict";(self.webpackChunkjmoney=self.webpackChunkjmoney||[]).push([[965],{9984(e,a,t){t.d(a,{A:()=>o});t(5043);var n=t(579);const o=e=>{let{progress:a=0,text:t="",subtext:o="",pathColor:l="#3b82f6",textColor:r="#000",fontSize:s="1rem",size:c=100,strokeWidth:i=10}=e;const u=(c-i)/2,d=2*Math.PI*u,m=d*(1-a/100);return(0,n.jsxs)("svg",{width:c,height:c,viewBox:"0 0 ".concat(c," ").concat(c),children:[(0,n.jsx)("circle",{cx:c/2,cy:c/2,r:u,fill:"none",stroke:"#e5e7eb",strokeWidth:i}),(0,n.jsx)("circle",{cx:c/2,cy:c/2,r:u,fill:"none",stroke:l,strokeWidth:i,strokeDasharray:d,strokeDashoffset:m,strokeLinecap:"round",transform:"rotate(-90 ".concat(c/2," ").concat(c/2,")"),style:{transition:"stroke-dashoffset 0.5s ease"}}),(0,n.jsx)("text",{x:"50%",y:o?"40%":"50%",textAnchor:"middle",dominantBaseline:"central",fill:r,fontSize:s,fontWeight:"bold",children:t}),o&&(0,n.jsx)("text",{x:"50%",y:"60%",textAnchor:"middle",dominantBaseline:"central",fill:r,fontSize:s,fontWeight:"bold",children:o})]})}},1486(e,a,t){t.d(a,{A:()=>l});var n=t(3261),o=t(579);const l=e=>{let{options:a,value:t,onChange:l,isDisabled:r=!1,isMulti:s=!1,placeholder:c="",isSearchable:i=!1}=e;return(0,o.jsx)(n.Ay,{className:"react-select-container",classNamePrefix:"react-select",options:a,value:t,onChange:l,isDisabled:r,isMulti:s,placeholder:c,isSearchable:i})}},2771(e,a,t){t.d(a,{A:()=>o});var n=t(5043);const o=()=>{const[e,a]=(0,n.useState)(document.documentElement.getAttribute("data-theme")||"light");return(0,n.useEffect)((()=>{const e=new MutationObserver((()=>{const e=document.documentElement.getAttribute("data-theme");a(e||"light")}));return e.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),()=>e.disconnect()}),[]),e}},1965(e,a,t){t.r(a),t.d(a,{default:()=>b});var n=t(9379),o=t(5043),l=t(9992),r=t(6756);const s=[{value:"updated_at",label:"Sort by Updated"},{value:"created_at",label:"Sort by Created"},{value:"name",label:"Sort by Name"},{value:"goal_amount",label:"Sort by Goal Amount"},{value:"current_amount",label:"Sort by Current Amount"},{value:"progress",label:"Sort by Progress"}];var c=t(2024),i=t(8861),u=t(3156),d=t(6720),m=t(9984),g=t(2771),h=t(579);const x=e=>{let{title:a,progress:t,logo:n,target:o,current:l,onEdit:s,onDelete:c}=e;const u=(0,g.A)();return(0,h.jsxs)("div",{className:"goal-card",children:[(0,h.jsxs)("div",{className:"goal-card-header",children:[(0,h.jsx)("div",{className:"goal-card-title",children:a}),(0,h.jsx)("div",{className:"goal-progress",children:(0,h.jsx)(m.A,{progress:t,text:"".concat(Math.round(t),"%"),pathColor:"#3ecf8e",textColor:"dark"===u?"#f1f1f1":"#374151",fontSize:"13px",size:40,strokeWidth:4})})]}),(0,h.jsxs)("div",{className:"goal-card-body",children:[(0,h.jsx)("div",{className:"goal-card-logo-container",children:(0,h.jsx)("img",{src:n,alt:a,className:"goal-card-logo"})}),(0,h.jsxs)("div",{className:"amount-container",children:[(0,h.jsxs)("div",{className:"amount-section",children:[(0,h.jsx)("div",{className:"amount-label",children:"TARGET"}),(0,h.jsx)("div",{className:"amount-value red-text",children:(0,r.mC)(o||0)})]}),(0,h.jsx)("div",{className:"divider"}),(0,h.jsxs)("div",{className:"amount-section",children:[(0,h.jsx)("div",{className:"amount-label",children:"CURRENT"}),(0,h.jsx)("div",{className:"amount-value green-text",children:(0,r.mC)(l||0)})]})]})]}),(0,h.jsxs)("div",{className:"goal-card-actions",children:[(0,h.jsx)(i.A,{icon:(0,h.jsx)(d.MdModeEditOutline,{}),variant:"primary",onClick:s}),(0,h.jsx)(i.A,{icon:(0,h.jsx)(d.MdDelete,{}),variant:"danger",onClick:c})]})]})};var v=t(184);const j=e=>{let{initialData:a,onSave:t,onCancel:l,saving:r}=e;const[s,c]=(0,o.useState)({name:"",logo:"",goal_amount:"",current_amount:""});(0,o.useEffect)((()=>{c(a?{name:a.name||"",logo:a.logo||"",goal_amount:a.goal_amount||"",current_amount:a.current_amount||""}:{name:"",logo:"",goal_amount:"",current_amount:""})}),[a]);return(0,h.jsxs)("div",{className:"goal-form",children:[(0,h.jsxs)("div",{className:"goal-form-fields",children:[(0,h.jsx)("input",{type:"text",placeholder:"Name",value:s.name,onChange:e=>c((0,n.A)((0,n.A)({},s),{},{name:e.target.value})),className:"goal-form-input"}),(0,h.jsx)("input",{type:"text",placeholder:"Logo URL",value:s.logo,onChange:e=>c((0,n.A)((0,n.A)({},s),{},{logo:e.target.value})),className:"goal-form-input"}),(0,h.jsx)("input",{type:"number",placeholder:"Goal Amount",value:s.goal_amount,onChange:e=>c((0,n.A)((0,n.A)({},s),{},{goal_amount:e.target.value})),className:"goal-form-input"}),(0,h.jsx)("input",{type:"number",placeholder:"Current Amount",value:s.current_amount,onChange:e=>c((0,n.A)((0,n.A)({},s),{},{current_amount:e.target.value})),className:"goal-form-input"})]}),(0,h.jsxs)("div",{className:"goal-form-actions",children:[(0,h.jsx)(i.A,{icon:(0,h.jsx)(v.dIn,{}),text:r?"Saving...":"Save",variant:"success",onClick:()=>{s.name&&s.goal_amount?t(s):alert("Please fill Name and Goal Amount")},disabled:r}),(0,h.jsx)(i.A,{icon:(0,h.jsx)(v.yyx,{}),text:"Cancel",variant:"warning",onClick:l})]})]})};var f=t(90),p=t(1486),_=t(9278),A=t(9657);const b=()=>{const e=(0,A.Ub)({maxWidth:768}),[a,t]=(0,o.useState)([]),[d,m]=(0,o.useState)(!0),[g,v]=(0,o.useState)(!1),[b,N]=(0,o.useState)(null),[C,y]=(0,o.useState)("updated_at"),[w,S]=(0,o.useState)(!1),k=(0,o.useCallback)((async()=>{const e=await(0,r.Wh)(!0);t(e)}),[]),E=(0,o.useCallback)((async()=>{m(!0);const e=await(0,_.Fr)();t(e),m(!1)}),[]);(0,o.useEffect)((()=>{E()}),[E]);const D=function(){N(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null),v(!0)},M=()=>{v(!1),N(null)},G=((e,a)=>{var t;return null===(t=[...e])||void 0===t?void 0:t.sort(((e,t)=>{if("name"===a)return e.name.localeCompare(t.name);if("goal_amount"===a)return t.goal_amount-e.goal_amount;if("current_amount"===a)return t.current_amount-e.current_amount;if("progress"===a){const a=e.goal_amount?e.current_amount/e.goal_amount:0;return(t.goal_amount?t.current_amount/t.goal_amount:0)-a}return"created_at"===a?new Date(t.created_at)-new Date(e.created_at):"updated_at"===a?new Date(t.updated_at)-new Date(e.updated_at):0}))})(a,C);return(0,h.jsxs)(c.A,{title:"Goals",loading:!a||d,onRefresh:k,children:[(0,h.jsxs)("div",{className:"goals-header",children:[(0,h.jsx)("div",{className:"left-controls",children:(0,h.jsx)(p.A,{options:s,value:s.find((e=>e.value===C)),onChange:e=>y(e.value)})}),(0,h.jsx)("div",{className:"right-controls",children:(0,h.jsx)(i.A,{icon:(0,h.jsx)(u.ApK,{}),text:e?null:"Add Goal",variant:"primary",onClick:()=>D(),"aria-label":"Add new goal"})})]}),(0,h.jsx)("div",{className:"goal-card-container",children:G.map((e=>{const a=e.goal_amount?e.current_amount/e.goal_amount*100:0;return(0,h.jsx)("div",{className:"goal-card-wrapper",children:(0,h.jsx)(x,{title:e.name,progress:a,logo:e.logo,target:e.goal_amount,current:e.current_amount,onEdit:()=>D(e),onDelete:()=>(async e=>{if(e)try{await(0,l.KK)(e),await E()}catch(a){console.error("Error deleting goal:",a),alert("Could not delete goal.")}})(e.id)})},e.id)}))}),(0,h.jsxs)(f.A,{showModal:g,onClose:M,children:[(0,h.jsx)("h3",{children:b?"Edit Goal":"Add Goal"}),(0,h.jsx)(j,{initialData:b,onSave:async e=>{if(!w){S(!0);try{const a=(0,r.rU)();if(!a)throw new Error("User not found");const t=(0,n.A)((0,n.A)({},e),{},{user_id:a,goal_amount:parseFloat(e.goal_amount)||0,current_amount:parseFloat(e.current_amount)||0});b?await(0,l.iN)((0,n.A)((0,n.A)({},t),{},{id:b.id})):await(0,l.aZ)(t),M(),await E()}catch(a){console.error("Error saving goal:",a),alert("Something went wrong while saving goal.")}finally{S(!1)}}},onCancel:M,saving:w})]})]})}}}]);
//# sourceMappingURL=965.064a97d0.chunk.js.map