"use strict";(self.webpackChunkjmoney=self.webpackChunkjmoney||[]).push([[344],{4624(e,a,t){t.d(a,{A:()=>n});t(5043);var s=t(579);const n=e=>{let{message:a="No data",height:t=150,width:n=150,children:i}=e;return(0,s.jsxs)("div",{className:"no-data-card",children:[(0,s.jsx)("div",{className:"no-data-image",children:(0,s.jsxs)("svg",{width:n,height:t,viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("title",{children:"No data"}),(0,s.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[(0,s.jsxs)("g",{transform:"translate(24 31.67)",children:[(0,s.jsx)("ellipse",{fillOpacity:".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),(0,s.jsx)("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"}),(0,s.jsx)("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"}),(0,s.jsx)("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"}),(0,s.jsx)("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"})]}),(0,s.jsx)("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"}),(0,s.jsxs)("g",{transform:"translate(149.65 15.383)",fill:"#FFF",children:[(0,s.jsx)("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),(0,s.jsx)("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"})]})]})]})}),(0,s.jsxs)("div",{className:"no-data-description",children:[a,i]})]})}},6908(e,a,t){t.d(a,{A:()=>n});t(5043);var s=t(579);const n=e=>{let{title:a,subtitle:t,children:n,customStyles:i={}}=e;return(0,s.jsxs)("div",{className:"overview-card",style:i,children:[(0,s.jsxs)("div",{className:"overview-card-header",children:[(0,s.jsx)("h2",{className:"overview-card-title",children:a}),(0,s.jsx)("p",{className:"overview-card-subtitle",children:t})]}),(0,s.jsx)("div",{className:"overview-card-body",children:n})]})}},1794(e,a,t){t.d(a,{A:()=>r});var s=t(6756),n=(t(5043),t(184)),i=t(579);const r=e=>{let{transaction:a,onCardClick:t=()=>{}}=e;const{amount:r,category_name:l,category_icon:o,description:c,payee_name:d,payee_logo:m,type:u,transaction_timestamp:h,percentage:x=null,product_link:y=null}=a;return(0,i.jsxs)("div",{className:"transaction-card",onClick:t,children:[(0,i.jsxs)("div",{className:"transaction-left",children:[(0,i.jsx)("div",{className:"transaction-icon ".concat("Expense"===u?"expense":"income"),children:(0,s.sH)(o)}),(0,i.jsxs)("div",{className:"transaction-details",children:[(0,i.jsx)("div",{className:"category-name",children:l}),c&&(0,i.jsx)("div",{className:"description",children:c}),h&&(0,i.jsx)("div",{className:"timestamp",children:(0,s.Ey)(h)}),(0,i.jsx)("div",{className:"payee-info",children:(m||y)&&(0,i.jsxs)(i.Fragment,{children:[m&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("img",{src:m,alt:d,className:"transaction-payee-logo"}),(0,i.jsx)("span",{className:"transaction-payee-name",children:d})]}),y&&(0,i.jsx)("a",{href:y,target:"_blank",rel:"noopener noreferrer",style:{color:"#007bff",cursor:"pointer"},onClick:e=>e.stopPropagation(),children:(0,i.jsx)(n.EQc,{size:14,color:"#007bff",title:"Product Link"})})]})})]})]}),(0,i.jsxs)("div",{className:"transaction-amount-section",children:[(0,i.jsx)("div",{className:"transaction-amount ".concat("Expense"===u?"expense":"income"),children:(0,s.mC)(Number(r))}),null!==x&&(0,i.jsxs)("div",{className:"transaction-percentage",children:[x,"%"]})]})]})}},5533(e,a,t){t.d(a,{A:()=>r});var s=t(5751),n=t(6756),i=t(579);const r=e=>{let{end:a}=e;return(0,i.jsx)(s.Ay,{end:a,duration:1.5,formattingFn:n.mC})}},1305(e,a,t){t.d(a,{A:()=>r});var s=t(5043),n=t(5843),i=t(579);const r=e=>{let{value:a=0,color:t="#3ecf8e",height:r="10px"}=e;const l=(0,s.useRef)(null),{ref:o,inView:c}=(0,n.Wx)();return(0,s.useEffect)((()=>{if(c&&l.current){const e="".concat(Math.min(a,100),"%");l.current.style.width=e,l.current.classList.add("animate")}}),[c,a]),(0,s.useEffect)((()=>{l.current&&!c&&(l.current.style.width="0%",l.current.classList.remove("animate"))}),[c]),(0,i.jsx)("div",{className:"progress-bar-container",ref:o,style:{height:r},children:(0,i.jsx)("div",{className:"progress-bar-fill",ref:l,style:{backgroundColor:t}})})}},6405(e,a,t){t.d(a,{A:()=>n});t(5043);var s=t(579);const n=e=>{let{text:a="Loading Transactions..."}=e;return(0,s.jsxs)("div",{className:"inline-loader",children:[(0,s.jsx)("div",{className:"spinner"}),(0,s.jsx)("span",{className:"loader-text",children:a})]})}},1486(e,a,t){t.d(a,{A:()=>i});var s=t(3261),n=t(579);const i=e=>{let{options:a,value:t,onChange:i,isDisabled:r=!1,isMulti:l=!1,placeholder:o="",isSearchable:c=!1}=e;return(0,n.jsx)(s.Ay,{className:"react-select-container",classNamePrefix:"react-select",options:a,value:t,onChange:i,isDisabled:r,isMulti:l,placeholder:o,isSearchable:c})}},4770(e,a,t){t.d(a,{A:()=>r});var s=t(6756),n=t(1486),i=(t(5043),t(579));const r=e=>{let{showYear:a=!0,showMonth:t=!0,yearValue:r,onYearChange:l,monthValue:o,onMonthChange:c,disabled:d}=e;return(0,i.jsxs)("div",{className:"filters-wrapper",children:[a&&(0,i.jsx)(n.A,{options:(0,s.gD)(),value:r,onChange:l,isDisabled:d}),t&&(0,i.jsx)(n.A,{options:(0,s.Ly)(r.value),value:o,onChange:c,isDisabled:d})]})}},8515(e,a,t){t.d(a,{A:()=>S});var s=t(184),n=t(5043),i=t(6756),r=t(2024),l=t(8861),o=t(1180),c=t(6992),d=t(6102),m=t(7869),u=t(379),h=t(579);const x=e=>{let{data:a,colors:t}=e;return(0,h.jsx)(o.u,{width:"100%",height:250,children:(0,h.jsxs)(c.r,{children:[(0,h.jsx)(d.Fq,{data:a,dataKey:"value",nameKey:"name",innerRadius:60,outerRadius:100,paddingAngle:3,label:!1,children:null===a||void 0===a?void 0:a.map(((e,a)=>(0,h.jsx)(m.f,{fill:t[a%t.length]},"cell-".concat(a))))}),(0,h.jsx)(u.m,{})]})})};var y=t(6405),v=t(4770),p=t(4624),g=t(1794),j=t(2916),b=t(7077),f=t(9657);const S=e=>{let{title:a,showMonthSelect:t=!0,onBack:o}=e;const c=(0,f.Ub)({maxWidth:768}),[d,m]=(0,n.useState)(!0),[u,S]=(0,n.useState)("Expense"),[N,w]=(0,n.useState)({value:(new Date).getMonth(),label:(0,i.Ly)()[(new Date).getMonth()].label}),[C,A]=(0,n.useState)({value:(new Date).getFullYear(),label:(new Date).getFullYear().toString()}),[k,M]=(0,n.useState)([]),[E,_]=(0,n.useState)("summary"),[F,B]=(0,n.useState)([]),[D,V]=(0,n.useState)(null),[I,Y]=(0,n.useState)(0),[L,O]=(0,n.useState)(!0);(0,n.useEffect)((()=>{c&&O(!1)}),[c]),(0,n.useEffect)((()=>{(async()=>{m(!0);const e=await(0,b.r2)();let a;a=t?e.filter((e=>{const a=new Date(e.date);return e.type===u&&a.getMonth()===N.value&&a.getFullYear()===C.value})):e.filter((e=>{const a=new Date(e.date);return e.type===u&&a.getFullYear()===C.value}));const s=a.reduce(((e,a)=>e+a.amount),0),n={};a.forEach((e=>{n[e.category_name]||(n[e.category_name]={amount:0,icon:e.category_icon,transactions:[]}),n[e.category_name].amount+=e.amount,n[e.category_name].transactions.push(e)}));const i=Object.entries(n).map((e=>{let[a,t]=e;return{category_name:a,category_icon:t.icon,amount:t.amount,percentage:Math.round(t.amount/s*100),type:u,transactions:t.transactions}})).sort(((e,a)=>a.amount-e.amount));M(i),m(!1)})()}),[u,N,C,t]);return(0,h.jsxs)(h.Fragment,{children:["summary"===E&&(0,h.jsxs)(r.A,{title:a,onBack:o,children:[(0,h.jsxs)("div",{className:"toggle-button-group",children:[(0,h.jsx)("button",{onClick:()=>S("Expense"),className:"Expense"===u?"active":"",children:"Expense"}),(0,h.jsx)("button",{onClick:()=>S("Income"),className:"Income"===u?"active":"",children:"Income"})]}),(0,h.jsx)(v.A,{yearValue:C,onYearChange:e=>A(e),monthValue:N,onMonthChange:e=>w(e),disabled:d,showMonth:t}),(0,h.jsx)(h.Fragment,{children:d?(0,h.jsx)(y.A,{text:"Loading Categories"}):0===(null===k||void 0===k?void 0:k.length)?(0,h.jsx)(p.A,{message:"No transactions",height:"150",width:"200"}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"align-right",children:(0,h.jsx)(l.A,{text:c?null:L?"Hide Chart":"Show Chart",onClick:()=>{O(!L)},icon:L?(0,h.jsx)(s.mx3,{}):(0,h.jsx)(s.v$b,{})})}),L&&(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(x,{data:null===k||void 0===k?void 0:k.map((e=>({value:null===e||void 0===e?void 0:e.percentage,name:null===e||void 0===e?void 0:e.category_name}))),colors:(0,i.Wl)(k.length)})}),(0,h.jsx)("div",{className:"transaction-card-list",children:null===k||void 0===k?void 0:k.map(((e,a)=>(0,h.jsx)(g.A,{transaction:e,onCardClick:()=>{_("transactions"),B((0,i.SS)(e.transactions)),V(e.category_name),Y(e.amount),sessionStorage.setItem("transactionsViewMode",JSON.stringify(!0))}},a)))})]})})]}),"transactions"===E&&(0,h.jsx)(r.A,{title:a,onBack:()=>{_("summary"),B({})},children:(0,h.jsx)(j.A,{name:D,amount:I,transactions:F})})]})}},2916(e,a,t){t.d(a,{A:()=>l});var s=t(6756),n=t(4624),i=(t(5043),t(1794)),r=t(579);const l=e=>{var a,t;let{name:l,amount:o,transactions:c}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"date-summary-bar",children:[(0,r.jsx)("div",{style:{display:"flex"},children:l?(0,r.jsx)("div",{className:"summary-date",children:l}):(0,r.jsx)(r.Fragment,{})}),o?(0,r.jsx)("div",{className:"summary-amount",children:(0,s.mC)(o)}):(0,r.jsx)(r.Fragment,{})]}),c&&(0,r.jsxs)("div",{className:"transaction-page-wrapper",children:[null===Object||void 0===Object||null===(a=Object.entries(c))||void 0===a?void 0:a.map((e=>{let[a,t]=e;return(0,r.jsxs)("div",{className:"transaction-group",children:[(0,r.jsx)("h2",{className:"transaction-date-header",children:(0,s.Qm)(a)}),(0,r.jsx)("div",{className:"transaction-card-list",children:null===t||void 0===t?void 0:t.map((e=>(0,r.jsx)(i.A,{transaction:e},e.id)))})]},a)})),0===(null===Object||void 0===Object||null===(t=Object.entries(c))||void 0===t?void 0:t.length)&&(0,r.jsx)(n.A,{message:"No transactions"})]})]})}},2771(e,a,t){t.d(a,{A:()=>n});var s=t(5043);const n=()=>{const[e,a]=(0,s.useState)(document.documentElement.getAttribute("data-theme")||"light");return(0,s.useEffect)((()=>{const e=new MutationObserver((()=>{const e=document.documentElement.getAttribute("data-theme");a(e||"light")}));return e.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),()=>e.disconnect()}),[]),e}},6344(e,a,t){t.r(a),t.d(a,{default:()=>U});var s=t(6720),n=t(5043),i=t(2024),r=t(9570),l=t(4227),o=t(1180),c=t(1474),d=t(7734),m=t(2185),u=t(6026),h=t(379),x=t(95),y=t(1080),v=t(184),p=t(6756),g=t(8861),j=t(6405),b=t(4770),f=t(4624),S=t(1794),N=t(2916),w=t(7077),C=t(9657),A=t(2771),k=t(579);const M=e=>{let{title:a,onBack:t}=e;const s=(0,A.A)(),[M,E]=(0,n.useState)(!0),_=(0,C.Ub)({maxWidth:768}),[F,B]=(0,n.useState)({value:(new Date).getMonth(),label:(0,p.Ly)()[(new Date).getMonth()].label}),[D,V]=(0,n.useState)({value:(new Date).getFullYear(),label:(new Date).getFullYear().toString()}),[I,Y]=(0,n.useState)([]),[L,O]=(0,n.useState)([]),[z,P]=(0,n.useState)(0),[H,T]=(0,n.useState)(0),[R,K]=(0,n.useState)("summary"),[J,W]=(0,n.useState)([]),[U,G]=(0,n.useState)(null),[Q,$]=(0,n.useState)(0),[q,X]=(0,n.useState)([]),[Z,ee]=(0,n.useState)(!0),[ae,te]=(0,n.useState)(!0),[se,ne]=(0,n.useState)(!0);(0,n.useEffect)((()=>{_&&(te(!Z),ne(!Z))}),[_,Z]),(0,n.useEffect)((()=>{(async()=>{var e,a;E(!0);const t=await(0,w.r2)(),s=t.filter((e=>{const a=new Date(e.date);return a.getMonth()===F.value&&a.getFullYear()===D.value})),n=s.filter((e=>"Expense"===e.type)),i=n.reduce(((e,a)=>e+a.amount),0);P(i);let r={};n.forEach((e=>{r[e.category_name]||(r[e.category_name]={amount:0,icon:e.category_icon,transactions:[]}),r[e.category_name].amount+=e.amount,r[e.category_name].transactions.push(e)}));const l=null===(e=Object.entries(r))||void 0===e?void 0:e.map((e=>{let[a,t]=e;return{category_name:a,category_icon:t.icon,amount:t.amount,percentage:Math.round(t.amount/i*100),type:"Expense",transactions:t.transactions}})).sort(((e,a)=>a.percentage-e.percentage));Y(l);const o=s.filter((e=>"Income"===e.type)),c=o.reduce(((e,a)=>e+a.amount),0);T(c);let d={};o.forEach((e=>{d[e.category_name]||(d[e.category_name]={amount:0,icon:e.category_icon,transactions:[]}),d[e.category_name].amount+=e.amount,d[e.category_name].transactions.push(e)}));const m=null===(a=Object.entries(d))||void 0===a?void 0:a.map((e=>{let[a,t]=e;return{category_name:a,category_icon:t.icon,amount:t.amount,percentage:Math.round(t.amount/c*100),type:"Income",transactions:t.transactions}})).sort(((e,a)=>a.percentage-e.percentage));O(m);const u=t.filter((e=>new Date(e.date).getFullYear()===D.value)),h=Array.from({length:12},((e,a)=>{const t=u.filter((e=>"Income"===e.type&&new Date(e.date).getMonth()===a)).reduce(((e,a)=>e+a.amount),0),s=u.filter((e=>"Expense"===e.type&&new Date(e.date).getMonth()===a)).reduce(((e,a)=>e+a.amount),0);return{full_name:(0,p.Ly)()[a].label,name:a+1,income:t,expense:s}}));X(h),E(!1)})()}),[F,D]);return(0,k.jsxs)(k.Fragment,{children:["summary"===R&&(0,k.jsxs)(i.A,{title:a,onBack:t,children:[(0,k.jsx)(b.A,{yearValue:D,onYearChange:e=>V(e),monthValue:F,onMonthChange:e=>B(e),disabled:M}),!M&&(0,k.jsx)("div",{className:"align-right",children:(0,k.jsx)(g.A,{text:_?null:Z?"Hide Chart":"Show Chart",onClick:()=>{ee(!Z)},icon:Z?(0,k.jsx)(v.mx3,{}):(0,k.jsx)(v.v$b,{})})}),Z&&(0,k.jsx)("div",{className:"chart-wrapper",children:(0,k.jsx)(o.u,{width:"100%",height:300,children:(0,k.jsxs)(c.E,{data:q,margin:{top:10,right:30,left:0,bottom:5},onClick:e=>{if(null!==e&&void 0!==e&&e.activeLabel){const a=e.activeLabel-1;B({value:a,label:(0,p.Ly)()[a].label})}},children:[(0,k.jsx)(d.d,{strokeDasharray:"3 3"}),(0,k.jsx)(m.W,{dataKey:_?"name":"full_name"}),(0,k.jsx)(u.h,{hide:_}),(0,k.jsx)(h.m,{formatter:e=>(0,p.mC)(e),labelFormatter:e=>{var a;const t=e-1;return(null===(a=(0,p.Ly)()[t])||void 0===a?void 0:a.label)||""},contentStyle:{backgroundColor:"dark"===s?"#1f1f1f":"#ffffff",borderColor:"dark"===s?"#333":"#ccc",borderRadius:"6px",boxShadow:"0 0 10px rgba(0,0,0,0.15)"},itemStyle:{color:"dark"===s?"#e0e0e0":"#333"},labelStyle:{color:"dark"===s?"#cccccc":"#000000",fontWeight:"bold"}}),(0,k.jsx)(x.s,{}),(0,k.jsx)(y.yP,{dataKey:"income",fill:"#3ecf8e",name:"Income"}),(0,k.jsx)(y.yP,{dataKey:"expense",fill:"#ef4444",name:"Expense"})]})})}),M?(0,k.jsx)(j.A,{}):0===(null===I||void 0===I?void 0:I.length)?(0,k.jsx)(f.A,{message:"No expenses found",height:"100",width:"150"}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:"date-summary-bar",children:[(0,k.jsx)("div",{className:"summary-date",onClick:()=>{te(!ae)},style:{cursor:"pointer"},children:"Expense"}),(0,k.jsx)("div",{className:"red-text",children:(0,p.mC)(z)})]}),(0,k.jsx)(r.N,{children:ae&&(0,k.jsx)(l.P.div,{className:"transaction-card-list",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.5},children:null===I||void 0===I?void 0:I.map(((e,a)=>(0,k.jsx)(S.A,{transaction:e,onCardClick:()=>{K("transactions"),W((0,p.SS)(e.transactions)),G(e.category_name),$(e.amount),sessionStorage.setItem("transactionsViewMode",JSON.stringify(!0))}},a)))})})]}),M?(0,k.jsx)(k.Fragment,{}):0===L.length?(0,k.jsx)(f.A,{message:"No income found",height:"100",width:"150"}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:"date-summary-bar",children:[(0,k.jsx)("div",{className:"summary-date",onClick:()=>{ne(!se)},style:{cursor:"pointer"},children:"Income"}),(0,k.jsx)("div",{className:"green-text",children:(0,p.mC)(H)})]}),(0,k.jsx)(r.N,{children:se&&(0,k.jsx)(l.P.div,{className:"transaction-card-list",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.5},children:null===L||void 0===L?void 0:L.map(((e,a)=>(0,k.jsx)(S.A,{transaction:e,onCardClick:()=>{K("transactions"),W((0,p.SS)(e.transactions)),G(e.category_name),$(e.amount)}},a)))})})]})]}),"transactions"===R&&(0,k.jsx)(i.A,{title:a,onBack:()=>{K("summary"),W([])},children:(0,k.jsx)(N.A,{name:U,amount:Q,transactions:J})})]})};var E=t(7540),_=t(5200),F=t(1486);const{EXPENSE_CACHE_KEY:B,CHOOSEN_CATEGORIES_CACHE_KEY:D}=(0,p.hz)(),V=e=>{let{title:a,onBack:t}=e;const s=(0,C.Ub)({maxWidth:768}),[r,l]=(0,n.useState)(!0),[o,c]=(0,n.useState)(!0),[d,m]=(0,n.useState)({value:(new Date).getMonth(),label:(0,p.Ly)()[(new Date).getMonth()].label}),[u,h]=(0,n.useState)({value:(new Date).getFullYear(),label:(new Date).getFullYear().toString()}),[x,y]=(0,n.useState)([]),[A,M]=(0,n.useState)([]),[V,I]=(0,n.useState)([]),[Y,L]=(0,n.useState)([]),[O,z]=(0,n.useState)(0),[P,H]=(0,n.useState)("summary"),[T,R]=(0,n.useState)(null),[K,J]=(0,n.useState)([]),[W,U]=(0,n.useState)(null),[G,Q]=(0,n.useState)(0);(0,n.useEffect)((()=>{(async()=>{const e=await(0,E.Jt)(B);y(e);const a=await(0,E.Jt)(D);if(a&&0!==a.length){var t;M(a);const s=null===(t=e.filter((e=>a.includes(e.id))))||void 0===t?void 0:t.map((e=>({value:e.id,label:e.name})));I(s)}else R("Configure Categories"),H("configure");c(!1)})()}),[]),(0,n.useEffect)((()=>{o||(async()=>{l(!0);const e=(await(0,w.r2)()).filter((e=>{const a=new Date(e.date);return a.getMonth()===d.value&&a.getFullYear()===u.value}));if(A&&(null===A||void 0===A?void 0:A.length)>0){var a;const t=e.filter((e=>"Expense"===e.type&&A.includes(e.category_id))),s=t.reduce(((e,a)=>e+a.amount),0);z(s);let n={};t.forEach((e=>{n[e.category_name]||(n[e.category_name]={amount:0,icon:e.category_icon,transactions:[]}),n[e.category_name].amount+=e.amount,n[e.category_name].transactions.push(e)}));const i=null===(a=Object.entries(n))||void 0===a?void 0:a.map((e=>{let[a,t]=e;return{category_name:a,category_icon:t.icon,amount:t.amount,percentage:s>0?Math.round(t.amount/s*100):0,type:"Expense",transactions:t.transactions}})).sort(((e,a)=>a.amount-e.amount));L(i)}else L([]),z(0);l(!1)})()}),[d,u,A,o]);const $=null===x||void 0===x?void 0:x.map((e=>({value:e.id,label:e.name}))),q=()=>{H("summary"),R(null),J([])};return(0,k.jsxs)("div",{children:["configure"===P&&(0,k.jsxs)(i.A,{title:T,onBack:q,children:[(0,k.jsx)("div",{style:{marginBottom:"1rem"},children:(0,k.jsx)(F.A,{isMulti:!0,options:$,value:V,onChange:I,placeholder:"Select categories to track"})}),(0,k.jsx)(g.A,{icon:(0,k.jsx)(_.Bc_,{}),variant:"success",onClick:async()=>{const e=null===V||void 0===V?void 0:V.map((e=>e.value));await(0,E.hZ)(D,e),M(e),R(null),H("summary")},text:"Save Categories",disabled:0===V.length})]}),"summary"===P&&(0,k.jsxs)(i.A,{title:a,onBack:t,children:[(0,k.jsx)("div",{className:"align-right",children:(0,k.jsx)(g.A,{icon:(0,k.jsx)(v.uO9,{}),onClick:()=>{var e;R("Configure Categories"),H("configure");const a=null===(e=x.filter((e=>A.includes(e.id))))||void 0===e?void 0:e.map((e=>({value:e.id,label:e.name})));I(a),sessionStorage.setItem("transactionsViewMode",JSON.stringify(!0))},text:s?null:"Edit Configuration"})}),(0,k.jsx)(b.A,{yearValue:u,onYearChange:e=>h(e),monthValue:d,onMonthChange:e=>m(e),disabled:r}),(0,k.jsxs)("div",{className:"date-summary-bar",children:[(0,k.jsx)("div",{className:"summary-date",children:"Expense"}),(0,k.jsx)("div",{className:"summary-amount",children:(0,p.mC)(O)})]}),o||r?(0,k.jsx)(j.A,{}):0===Y.length?(0,k.jsx)(f.A,{message:"No transactions found",height:"100",width:"150"}):(0,k.jsx)("div",{className:"transaction-card-list",children:null===Y||void 0===Y?void 0:Y.map(((e,a)=>(0,k.jsx)(S.A,{transaction:e,onCardClick:()=>{H("transactions"),J((0,p.SS)(e.transactions)),U(e.category_name),Q(e.amount),sessionStorage.setItem("transactionsViewMode",JSON.stringify(!0))}},a)))})]}),"transactions"===P&&(0,k.jsx)(i.A,{title:a,onBack:q,children:(0,k.jsx)(N.A,{name:W,amount:G,transactions:K})})]})};var I=t(3900),Y=t(3536);const L=e=>{let{title:a,onBack:t}=e;const[r,l]=(0,n.useState)(!0),[o,c]=(0,n.useState)("summary"),[d,m]=(0,n.useState)([]),[u,h]=(0,n.useState)([]),[x,y]=(0,n.useState)([]),[v,g]=(0,n.useState)(null),[b,S]=(0,n.useState)(0),[C,A]=(0,n.useState)(""),[M,E]=(0,n.useState)(null),[_,F]=(0,n.useState)("Expense");(0,n.useEffect)((()=>{(async()=>{var e;l(!0);const a=(await(0,w.r2)()).filter((e=>e.payee_name&&e.type===_)),t=(0,Y.groupBy)(a,(e=>e.payee_name)),s=null===(e=Object.entries(t))||void 0===e?void 0:e.map((e=>{let[a,t]=e;return{name:a,amount:t.reduce(((e,a)=>"Income"===a.type?e+a.amount:e-a.amount),0),transactions:t}}));s.sort(((e,a)=>e.name.localeCompare(a.name))),m(s),h(s);const n=new I.A(s,{keys:["name"],threshold:.3});E(n),l(!1)})()}),[_]),(0,n.useEffect)((()=>{if(!M)return;const e=(0,Y.debounce)((e=>{if(e){const a=M.search(e);h(a.map((e=>e.item)))}else h(d)}),300);return e(C),()=>e.cancel()}),[C,M,d]);const B=e=>{g(e.name),S(e.amount),y((0,p.SS)(e.transactions)),c("transactions")};return(0,k.jsxs)(k.Fragment,{children:["summary"===o&&(0,k.jsx)(i.A,{title:a,onBack:t,children:r?(0,k.jsx)(j.A,{}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:"toggle-button-group",children:[(0,k.jsx)("button",{onClick:()=>F("Expense"),className:"Expense"===_?"active":"",children:"Expense"}),(0,k.jsx)("button",{onClick:()=>F("Income"),className:"Income"===_?"active":"",children:"Income"})]}),(0,k.jsxs)("div",{className:"search-input-wrapper",children:[(0,k.jsx)("input",{type:"text",placeholder:"Search Payees",value:C,onChange:e=>A(e.target.value),className:"search-bar",spellCheck:!1,"aria-label":"Search payees",disabled:r}),C&&(0,k.jsx)("span",{className:"search-clear-icon",onClick:()=>A(""),role:"button",tabIndex:0,"aria-label":"Clear search",title:"Clear search",onKeyDown:e=>("Enter"===e.key||" "===e.key)&&A(""),children:(0,k.jsx)(s.MdClose,{})})]}),(0,k.jsxs)("div",{className:"payee-summary-wrapper",children:[0===(null===u||void 0===u?void 0:u.length)&&(0,k.jsx)(f.A,{message:"No Payee found",height:"150",width:"200"}),null===u||void 0===u?void 0:u.map((e=>(0,k.jsx)("div",{className:"payee-summary-card",onClick:()=>B(e),role:"button",tabIndex:0,onKeyDown:a=>{"Enter"!==a.key&&" "!==a.key||B(e)},"aria-label":"View transactions for ".concat(e.name),children:(0,k.jsxs)("div",{className:"payee-details",children:[(0,k.jsx)("div",{className:"payee-name",children:e.name}),(0,k.jsxs)("div",{className:"payee-amount ".concat(e.amount>=0?"green-text":"red-text"),children:[e.amount<0?"-":"",(0,p.mC)(Math.abs(e.amount))]})]})},e.name)))]})]})}),"transactions"===o&&(0,k.jsx)(i.A,{title:a,onBack:()=>{c("summary"),y([])},children:(0,k.jsx)(N.A,{name:v,amount:b,transactions:x})})]})},O=e=>{let{icon:a,title:t,description:s}=e;return(0,k.jsxs)("div",{className:"report-card",children:[(0,k.jsx)("div",{className:"report-icon",children:a}),(0,k.jsxs)("div",{className:"report-content",children:[(0,k.jsx)("div",{className:"report-title",children:t}),s&&(0,k.jsx)("div",{className:"report-description",children:s})]})]})};var z=t(5533),P=t(6908);const H=e=>{let{title:a,onBack:t}=e;const[r,l]=(0,n.useState)(!0),[o,c]=(0,n.useState)({value:(new Date).getMonth(),label:(0,p.Ly)()[(new Date).getMonth()].label}),[d,m]=(0,n.useState)({value:(new Date).getFullYear(),label:(new Date).getFullYear().toString()}),[u,h]=(0,n.useState)(0),[x,y]=(0,n.useState)(0),[v,g]=(0,n.useState)([]),[j,f]=(0,n.useState)([]),[S,C]=(0,n.useState)("summary"),[A,M]=(0,n.useState)(null);(0,n.useEffect)((()=>{(async()=>{l(!0);const e=(await(0,w.r2)()).filter((e=>{const a=new Date(e.date);return a.getMonth()===o.value&&a.getFullYear()===d.value})),a=e.filter((e=>"Subscription"===e.category_name));f((0,Y.groupBy)(a,"date"));const t=a.reduce(((e,a)=>e+a.amount),0);h(t);const s=e.filter((e=>"Bills"===e.category_name));g((0,Y.groupBy)(s,"date"));const n=s.reduce(((e,a)=>e+a.amount),0);y(n),l(!1)})()}),[d,o]);return(0,k.jsxs)(k.Fragment,{children:["summary"===S&&(0,k.jsxs)(i.A,{title:a,onBack:t,children:[(0,k.jsx)(b.A,{yearValue:d,onYearChange:e=>{m(e)},monthValue:o,onMonthChange:e=>{c(e)},disabled:r}),(0,k.jsx)("div",{onClick:()=>{u>0&&(C("transactions"),M("Subscriptions"),sessionStorage.setItem("transactionsViewMode",JSON.stringify(!0)))},children:(0,k.jsx)(P.A,{title:"Subscriptions",subtitle:"Total spent on subscriptions in ".concat(o.label,", ").concat(d.label),children:(0,k.jsxs)("div",{className:"subscription-bills-icon-count-wrapper ",children:[(0,k.jsx)(s.MdSubscriptions,{className:"subscription-bills-overview-icon"}),(0,k.jsx)("div",{className:"subscription-bills-amount expense-text",children:(0,k.jsx)(z.A,{end:u})})]})})}),(0,k.jsx)("div",{onClick:()=>{x>0&&(C("transactions"),M("Bills"),sessionStorage.setItem("transactionsViewMode",JSON.stringify(!0)))},children:(0,k.jsx)(P.A,{title:"Bills",subtitle:"Total spent on bills in ".concat(o.label,", ").concat(d.label),children:(0,k.jsxs)("div",{className:"subscription-bills-icon-count-wrapper ",children:[(0,k.jsx)(s.MdReceiptLong,{className:"subscription-bills-overview-icon"}),(0,k.jsx)("div",{className:"subscription-bills-amount expense-text",children:(0,k.jsx)(z.A,{end:x})})]})})})]}),"transactions"===S&&(0,k.jsxs)(i.A,{title:a,onBack:()=>{C("summary")},children:[(0,k.jsx)(b.A,{yearValue:d,onYearChange:e=>{m(e)},monthValue:o,onMonthChange:e=>{c(e)},disabled:r}),(0,k.jsxs)("div",{className:"toggle-button-group",children:[(0,k.jsx)("button",{onClick:()=>{M("Subscriptions")},className:"Subscriptions"===A?"active":"",children:"Subscriptions"}),(0,k.jsx)("button",{onClick:()=>{M("Bills")},className:"Bills"===A?"active":"",children:"Bills"})]}),"Subscriptions"===A&&(0,k.jsx)(N.A,{name:"Total",amount:u,transactions:j}),"Bills"===A&&(0,k.jsx)(N.A,{name:"Total",amount:x,transactions:v})]})]})},T=e=>{let{title:a,onBack:t}=e;const[s,r]=(0,n.useState)(!0),[l,o]=(0,n.useState)("Expense"),[c,d]=(0,n.useState)({value:(new Date).getMonth(),label:(0,p.Ly)()[(new Date).getMonth()].label}),[m,u]=(0,n.useState)({value:(new Date).getFullYear(),label:(new Date).getFullYear().toString()}),[h,x]=(0,n.useState)([]),[y,v]=(0,n.useState)("summary"),[g,S]=(0,n.useState)([]),[C,A]=(0,n.useState)(null),[M,E]=(0,n.useState)(0);(0,n.useEffect)((()=>{(async()=>{r(!0);let e=(await(0,w.r2)()).filter((e=>{const a=new Date(e.date);return null!==e.payee_id&&e.type===l&&a.getMonth()===c.value&&a.getFullYear()===m.value}));const a=e.reduce(((e,a)=>e+a.amount),0),t={};e.forEach((e=>{t[e.payee_name]||(t[e.payee_name]={amount:0,icon:"",transactions:[]}),t[e.payee_name].amount+=e.amount,t[e.payee_name].transactions.push(e)}));const s=Object.entries(t).map((e=>{let[t,s]=e;return{name:t,amount:s.amount,percentage:Math.round(s.amount/a*100),type:l,transactions:s.transactions}})).sort(((e,a)=>a.amount-e.amount));x(s),r(!1)})()}),[l,c,m]);return(0,k.jsxs)(k.Fragment,{children:["summary"===y&&(0,k.jsxs)(i.A,{title:a,onBack:t,children:[(0,k.jsxs)("div",{className:"toggle-button-group",children:[(0,k.jsx)("button",{onClick:()=>o("Expense"),className:"Expense"===l?"active":"",children:"Expense"}),(0,k.jsx)("button",{onClick:()=>o("Income"),className:"Income"===l?"active":"",children:"Income"})]}),(0,k.jsx)(b.A,{yearValue:m,onYearChange:e=>u(e),monthValue:c,onMonthChange:e=>d(e),disabled:s}),(0,k.jsx)(k.Fragment,{children:s?(0,k.jsx)(j.A,{text:"Loading Payees"}):0===(null===h||void 0===h?void 0:h.length)?(0,k.jsx)(f.A,{message:"No transactions",height:"150",width:"200"}):(0,k.jsx)("div",{className:"payee-summary-wrapper",children:null===h||void 0===h?void 0:h.map((e=>(0,k.jsx)("div",{className:"payee-summary-card",onClick:()=>{S((0,p.SS)(e.transactions)),v("transactions"),A(e.name),E(e.amount),sessionStorage.setItem("transactionsViewMode",JSON.stringify(!0))},role:"button",tabIndex:0,children:(0,k.jsxs)("div",{className:"payee-details",children:[(0,k.jsx)("div",{className:"payee-name",children:e.name}),(0,k.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[(0,k.jsx)("div",{className:"payee-amount ".concat("Income"===l?"green-text":"red-text"),children:(0,p.mC)(Math.abs(e.amount))}),(0,k.jsxs)("div",{className:"transaction-percentage",children:[e.percentage,"%"]})]})]})},e.name)))})})]}),"transactions"===y&&(0,k.jsx)(i.A,{title:a,onBack:()=>{v("summary"),S({})},children:(0,k.jsx)(N.A,{name:C,amount:M,transactions:g})})]})};var R=t(8515),K=t(1305);const J=e=>{let{showMonth:a=!1,title:t,onBack:s}=e;const[r,l]=(0,n.useState)({value:(new Date).getFullYear(),label:(new Date).getFullYear().toString()}),[o,c]=(0,n.useState)({value:(new Date).getMonth(),label:(0,p.Ly)()[(new Date).getMonth()].label}),[d,m]=(0,n.useState)(0),[u,h]=(0,n.useState)(0);(0,n.useEffect)((()=>{(async()=>{const e=await(0,w.r2)();if(!r)return;const t=parseInt(r.value);let s=e.filter((e=>new Date(e.transaction_timestamp).getFullYear()===t));if(a&&o){const e=parseInt(o.value);s=s.filter((a=>new Date(a.transaction_timestamp).getMonth()===e))}const n=s.filter((e=>"Income"===e.type)).reduce(((e,a)=>e+a.amount),0),i=s.filter((e=>"Expense"===e.type)).reduce(((e,a)=>e+a.amount),0);m(n),h(i)})()}),[r,o,a]);const x=d>0?Math.min(u/d*100,100):0;return(0,k.jsx)(i.A,{title:t,onBack:s,children:(0,k.jsxs)("div",{className:"yearly-summary-view",children:[(0,k.jsx)(b.A,{yearValue:r,onYearChange:e=>l(e),monthValue:o,onMonthChange:e=>c(e),showMonth:a}),(0,k.jsxs)(P.A,{title:"Income vs Expense | ".concat(a?o.label:""," ").concat(r.label),children:[(0,k.jsxs)("div",{className:"summary-line",children:[(0,k.jsx)("div",{className:"summary-label",children:"Total Income"}),(0,k.jsx)("div",{className:"yearly-summary-amount income-text",children:(0,k.jsx)(z.A,{end:d})}),(0,k.jsx)(K.A,{value:100,color:"#3ecf8e",height:"18px"})]}),(0,k.jsxs)("div",{className:"summary-line",children:[(0,k.jsx)("div",{className:"summary-label",children:"Total Expense"}),(0,k.jsx)("div",{className:"yearly-summary-amount expense-text",children:(0,k.jsx)(z.A,{end:u})}),(0,k.jsx)(K.A,{value:x,color:"#ef4444",height:"18px"}),(0,k.jsx)("div",{className:"yearly-summary-expense-summary",children:d<u?(0,k.jsxs)("div",{className:"summary-box overspent",children:[(0,k.jsxs)("div",{className:"summary-label",children:[(0,k.jsx)("span",{className:"summary-icon",style:{fontSize:"2rem",color:"#ef4444"},children:"\u26a0\ufe0e"}),"Overspent"]}),(0,k.jsx)("div",{className:"summary-value expense-text",children:(0,p.mC)(Number((u-d).toFixed(2)))})]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:"summary-box saved",children:[(0,k.jsxs)("div",{className:"summary-label",children:[(0,k.jsx)("span",{className:"summary-icon",children:"\ud83d\udcb0"}),"Saved"]}),(0,k.jsx)("div",{className:"summary-value",children:(0,p.mC)(Number((d-u).toFixed(2)))})]}),(0,k.jsxs)("div",{className:"summary-box spent",children:[(0,k.jsxs)("div",{className:"summary-label",children:[(0,k.jsx)("span",{className:"summary-icon",children:"\ud83d\udcb8"})," Spent"]}),(0,k.jsxs)("div",{className:"summary-value",children:[x.toFixed(2),"%"]})]})]})})]})]})]})})},W=[{title:"Monthly Living Costs",description:"Track your monthly essential expenses",icon:(0,k.jsx)(s.MdHome,{size:28}),view:"monthlyLivingCosts"},{title:"Subscription and Bills",description:"Keep track of your recurring payments",icon:(0,k.jsx)(s.MdSubscriptions,{size:28}),view:"subscriptionAndBills"},{title:"Transactions By Payee",description:"See the complete history about a payee",icon:(0,k.jsx)(s.MdPerson,{size:28}),view:"transactionsByPayee"},{title:"Transactions By Category",description:"See the complete history about a category",icon:(0,k.jsx)(s.MdCategory,{size:28}),view:"transactionsByCategory"},{title:"Monthly Summary",description:"Review your monthly financial performance",icon:(0,k.jsx)(s.MdCalendarToday,{size:28}),view:"monthlySummary"},{title:"Income vs Expense",description:"Compare how much you earned vs spent",icon:(0,k.jsx)(s.MdCompareArrows,{size:28}),view:"incomeVsExpense"},{title:"Yearly Summary",description:"Review your yearly financial performance",icon:(0,k.jsx)(s.MdCalendarToday,{size:28}),view:"yearlySummary"},{title:"Payees",description:"Analyze transactions by payees",icon:(0,k.jsx)(s.MdPeople,{size:28}),view:"payees"}],U=()=>{const[e,a]=(0,n.useState)(!0),[t,s]=(0,n.useState)("reportList"),[r,l]=(0,n.useState)("Reports");(0,n.useEffect)((()=>{a(!1)}),[]);const o=()=>{s("reportList"),l("Reports")};return(0,k.jsx)(k.Fragment,{children:"reportList"===t?(0,k.jsx)(i.A,{title:r,loading:e,children:(0,k.jsx)("div",{className:"report-container",children:W.map(((e,a)=>(0,k.jsx)("div",{className:"report-card-wrapper",style:{animationDelay:"".concat(100*a,"ms")},onClick:()=>{s(e.view),l(e.title)},children:(0,k.jsx)(O,{icon:e.icon,title:e.title,description:e.description})},e.title)))})}):(()=>{switch(t){case"monthlyLivingCosts":return(0,k.jsx)(V,{title:r,onBack:o});case"subscriptionAndBills":return(0,k.jsx)(H,{title:r,onBack:o});case"transactionsByPayee":return(0,k.jsx)(T,{title:r,onBack:o});case"transactionsByCategory":return(0,k.jsx)(R.A,{title:r,onBack:o});case"monthlySummary":return(0,k.jsx)(J,{showMonth:!0,title:r,onBack:o});case"incomeVsExpense":return(0,k.jsx)(M,{title:r,onBack:o});case"yearlySummary":return(0,k.jsx)(J,{title:r,onBack:o});case"payees":return(0,k.jsx)(L,{title:r,onBack:o});default:return null}})()})}}}]);
//# sourceMappingURL=344.f2a2d5a7.chunk.js.map