"use strict";(self.webpackChunkjmoney=self.webpackChunkjmoney||[]).push([[965],{1486:(e,a,t)=>{t.d(a,{A:()=>l});var n=t(5410),o=t(579);const l=e=>{let{options:a,value:t,onChange:l,isDisabled:r=!1,isMulti:s=!1,placeholder:i="",isSearchable:c=!1}=e;return(0,o.jsx)(n.Ay,{className:"react-select-container",classNamePrefix:"react-select",options:a,value:t,onChange:l,isDisabled:r,isMulti:s,placeholder:i,isSearchable:c})}},1965:(e,a,t)=>{t.r(a),t.d(a,{default:()=>b});var n=t(5043),o=t(9992),l=t(6756);const r=[{value:"updated_at",label:"Sort by Updated"},{value:"created_at",label:"Sort by Created"},{value:"name",label:"Sort by Name"},{value:"goal_amount",label:"Sort by Goal Amount"},{value:"current_amount",label:"Sort by Current Amount"},{value:"progress",label:"Sort by Progress"}];var s=t(2024),i=t(8861),c=t(3156),u=t(6720),d=t(9984),m=t(2771),g=t(579);const h=e=>{let{title:a,progress:t,logo:n,target:o,current:r,onEdit:s,onDelete:c}=e;const h=(0,m.A)();return(0,g.jsxs)("div",{className:"goal-card",children:[(0,g.jsxs)("div",{className:"goal-card-header",children:[(0,g.jsx)("div",{className:"goal-card-title",children:a}),(0,g.jsx)("div",{className:"goal-progress",children:(0,g.jsx)(d.A,{progress:t,text:`${Math.round(t)}%`,pathColor:"#3ecf8e",textColor:"dark"===h?"#f1f1f1":"#374151",fontSize:"13px",size:40,strokeWidth:4})})]}),(0,g.jsxs)("div",{className:"goal-card-body",children:[(0,g.jsx)("div",{className:"goal-card-logo-container",children:(0,g.jsx)("img",{src:n,alt:a,className:"goal-card-logo"})}),(0,g.jsxs)("div",{className:"amount-container",children:[(0,g.jsxs)("div",{className:"amount-section",children:[(0,g.jsx)("div",{className:"amount-label",children:"TARGET"}),(0,g.jsx)("div",{className:"amount-value red-text",children:(0,l.mC)(o||0)})]}),(0,g.jsx)("div",{className:"divider"}),(0,g.jsxs)("div",{className:"amount-section",children:[(0,g.jsx)("div",{className:"amount-label",children:"CURRENT"}),(0,g.jsx)("div",{className:"amount-value green-text",children:(0,l.mC)(r||0)})]})]})]}),(0,g.jsxs)("div",{className:"goal-card-actions",children:[(0,g.jsx)(i.A,{icon:(0,g.jsx)(u.MdModeEditOutline,{}),variant:"primary",onClick:s}),(0,g.jsx)(i.A,{icon:(0,g.jsx)(u.MdDelete,{}),variant:"danger",onClick:c})]})]})};var x=t(184);const v=e=>{let{initialData:a,onSave:t,onCancel:o,saving:l}=e;const[r,s]=(0,n.useState)({name:"",logo:"",goal_amount:"",current_amount:""});(0,n.useEffect)((()=>{s(a?{name:a.name||"",logo:a.logo||"",goal_amount:a.goal_amount||"",current_amount:a.current_amount||""}:{name:"",logo:"",goal_amount:"",current_amount:""})}),[a]);return(0,g.jsxs)("div",{className:"goal-form",children:[(0,g.jsxs)("div",{className:"goal-form-fields",children:[(0,g.jsx)("input",{type:"text",placeholder:"Name",value:r.name,onChange:e=>s({...r,name:e.target.value}),className:"goal-form-input"}),(0,g.jsx)("input",{type:"text",placeholder:"Logo URL",value:r.logo,onChange:e=>s({...r,logo:e.target.value}),className:"goal-form-input"}),(0,g.jsx)("input",{type:"number",placeholder:"Goal Amount",value:r.goal_amount,onChange:e=>s({...r,goal_amount:e.target.value}),className:"goal-form-input"}),(0,g.jsx)("input",{type:"number",placeholder:"Current Amount",value:r.current_amount,onChange:e=>s({...r,current_amount:e.target.value}),className:"goal-form-input"})]}),(0,g.jsxs)("div",{className:"goal-form-actions",children:[(0,g.jsx)(i.A,{icon:(0,g.jsx)(x.dIn,{}),text:l?"Saving...":"Save",variant:"success",onClick:()=>{r.name&&r.goal_amount?t(r):alert("Please fill Name and Goal Amount")},disabled:l}),(0,g.jsx)(i.A,{icon:(0,g.jsx)(x.yyx,{}),text:"Cancel",variant:"warning",onClick:o})]})]})};var j=t(90),f=t(1486),p=t(9278),_=t(9657);const b=()=>{const e=(0,_.Ub)({maxWidth:768}),[a,t]=(0,n.useState)([]),[u,d]=(0,n.useState)(!0),[m,x]=(0,n.useState)(!1),[b,N]=(0,n.useState)(null),[C,y]=(0,n.useState)("updated_at"),[A,w]=(0,n.useState)(!1),S=(0,n.useCallback)((async()=>{const e=await(0,l.Wh)(!0);t(e)}),[]),k=(0,n.useCallback)((async()=>{d(!0);const e=await(0,p.Fr)();t(e),d(!1)}),[]);(0,n.useEffect)((()=>{k()}),[k]);const E=function(){N(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null),x(!0)},D=()=>{x(!1),N(null)},M=((e,a)=>{var t;return null===(t=[...e])||void 0===t?void 0:t.sort(((e,t)=>{if("name"===a)return e.name.localeCompare(t.name);if("goal_amount"===a)return t.goal_amount-e.goal_amount;if("current_amount"===a)return t.current_amount-e.current_amount;if("progress"===a){const a=e.goal_amount?e.current_amount/e.goal_amount:0;return(t.goal_amount?t.current_amount/t.goal_amount:0)-a}return"created_at"===a?new Date(t.created_at)-new Date(e.created_at):"updated_at"===a?new Date(t.updated_at)-new Date(e.updated_at):0}))})(a,C);return(0,g.jsxs)(s.A,{title:"Goals",loading:!a||u,onRefresh:S,children:[(0,g.jsxs)("div",{className:"goals-header",children:[(0,g.jsx)("div",{className:"left-controls",children:(0,g.jsx)(f.A,{options:r,value:r.find((e=>e.value===C)),onChange:e=>y(e.value)})}),(0,g.jsx)("div",{className:"right-controls",children:(0,g.jsx)(i.A,{icon:(0,g.jsx)(c.ApK,{}),text:e?null:"Add Goal",variant:"primary",onClick:()=>E(),"aria-label":"Add new goal"})})]}),(0,g.jsx)("div",{className:"goal-card-container",children:M.map((e=>{const a=e.goal_amount?e.current_amount/e.goal_amount*100:0;return(0,g.jsx)("div",{className:"goal-card-wrapper",children:(0,g.jsx)(h,{title:e.name,progress:a,logo:e.logo,target:e.goal_amount,current:e.current_amount,onEdit:()=>E(e),onDelete:()=>(async e=>{if(e)try{await(0,o.KK)(e),await k()}catch(a){console.error("Error deleting goal:",a),alert("Could not delete goal.")}})(e.id)})},e.id)}))}),(0,g.jsxs)(j.A,{showModal:m,onClose:D,children:[(0,g.jsx)("h3",{children:b?"Edit Goal":"Add Goal"}),(0,g.jsx)(v,{initialData:b,onSave:async e=>{if(!A){w(!0);try{const a=(0,l.rU)();if(!a)throw new Error("User not found");const t={...e,user_id:a,goal_amount:parseFloat(e.goal_amount)||0,current_amount:parseFloat(e.current_amount)||0};b?await(0,o.iN)({...t,id:b.id}):await(0,o.aZ)(t),D(),await k()}catch(a){console.error("Error saving goal:",a),alert("Something went wrong while saving goal.")}finally{w(!1)}}},onCancel:D,saving:A})]})]})}},2771:(e,a,t)=>{t.d(a,{A:()=>o});var n=t(5043);const o=()=>{const[e,a]=(0,n.useState)(document.documentElement.getAttribute("data-theme")||"light");return(0,n.useEffect)((()=>{const e=new MutationObserver((()=>{const e=document.documentElement.getAttribute("data-theme");a(e||"light")}));return e.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),()=>e.disconnect()}),[]),e}},9984:(e,a,t)=>{t.d(a,{A:()=>o});t(5043);var n=t(579);const o=e=>{let{progress:a=0,text:t="",subtext:o="",pathColor:l="#3b82f6",textColor:r="#000",fontSize:s="1rem",size:i=100,strokeWidth:c=10}=e;const u=(i-c)/2,d=2*Math.PI*u,m=d*(1-a/100);return(0,n.jsxs)("svg",{width:i,height:i,viewBox:`0 0 ${i} ${i}`,children:[(0,n.jsx)("circle",{cx:i/2,cy:i/2,r:u,fill:"none",stroke:"#e5e7eb",strokeWidth:c}),(0,n.jsx)("circle",{cx:i/2,cy:i/2,r:u,fill:"none",stroke:l,strokeWidth:c,strokeDasharray:d,strokeDashoffset:m,strokeLinecap:"round",transform:`rotate(-90 ${i/2} ${i/2})`,style:{transition:"stroke-dashoffset 0.5s ease"}}),(0,n.jsx)("text",{x:"50%",y:o?"40%":"50%",textAnchor:"middle",dominantBaseline:"central",fill:r,fontSize:s,fontWeight:"bold",children:t}),o&&(0,n.jsx)("text",{x:"50%",y:"60%",textAnchor:"middle",dominantBaseline:"central",fill:r,fontSize:s,fontWeight:"bold",children:o})]})}}}]);
//# sourceMappingURL=965.06885e3d.chunk.js.map