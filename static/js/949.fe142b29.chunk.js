"use strict";(self.webpackChunkjmoney=self.webpackChunkjmoney||[]).push([[949],{1486:(e,a,s)=>{s.d(a,{A:()=>i});var t=s(5410),n=s(579);const i=e=>{let{options:a,value:s,onChange:i,isDisabled:l=!1,isMulti:o=!1,placeholder:r="",isSearchable:c=!1}=e;return(0,n.jsx)(t.Ay,{className:"react-select-container",classNamePrefix:"react-select",options:a,value:s,onChange:i,isDisabled:l,isMulti:o,placeholder:r,isSearchable:c})}},1794:(e,a,s)=>{s.d(a,{A:()=>l});var t=s(6756),n=(s(5043),s(184)),i=s(579);const l=e=>{let{transaction:a,onCardClick:s=()=>{}}=e;const{amount:l,category_name:o,category_icon:r,description:c,payee_name:d,payee_logo:u,type:h,transaction_timestamp:m,percentage:p=null,product_link:x=null}=a;return(0,i.jsxs)("div",{className:"transaction-card",onClick:s,children:[(0,i.jsxs)("div",{className:"transaction-left",children:[(0,i.jsx)("div",{className:"transaction-icon "+("Expense"===h?"expense":"income"),children:(0,t.sH)(r)}),(0,i.jsxs)("div",{className:"transaction-details",children:[(0,i.jsx)("div",{className:"category-name",children:o}),c&&(0,i.jsx)("div",{className:"description",children:c}),m&&(0,i.jsx)("div",{className:"timestamp",children:(0,t.Ey)(m)}),(0,i.jsx)("div",{className:"payee-info",children:(u||x)&&(0,i.jsxs)(i.Fragment,{children:[u&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("img",{src:u,alt:d,className:"transaction-payee-logo"}),(0,i.jsx)("span",{className:"transaction-payee-name",children:d})]}),x&&(0,i.jsx)("a",{href:x,target:"_blank",rel:"noopener noreferrer",style:{color:"#007bff",cursor:"pointer"},onClick:e=>e.stopPropagation(),children:(0,i.jsx)(n.EQc,{size:14,color:"#007bff",title:"Product Link"})})]})})]})]}),(0,i.jsxs)("div",{className:"transaction-amount-section",children:[(0,i.jsx)("div",{className:"transaction-amount "+("Expense"===h?"expense":"income"),children:(0,t.mC)(Number(l))}),null!==p&&(0,i.jsxs)("div",{className:"transaction-percentage",children:[p,"%"]})]})]})}},4624:(e,a,s)=>{s.d(a,{A:()=>n});s(5043);var t=s(579);const n=e=>{let{message:a="No data",height:s=150,width:n=150,children:i}=e;return(0,t.jsxs)("div",{className:"no-data-card",children:[(0,t.jsx)("div",{className:"no-data-image",children:(0,t.jsxs)("svg",{width:n,height:s,viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("title",{children:"No data"}),(0,t.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[(0,t.jsxs)("g",{transform:"translate(24 31.67)",children:[(0,t.jsx)("ellipse",{fillOpacity:".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),(0,t.jsx)("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"}),(0,t.jsx)("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"}),(0,t.jsx)("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"}),(0,t.jsx)("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"})]}),(0,t.jsx)("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"}),(0,t.jsxs)("g",{transform:"translate(149.65 15.383)",fill:"#FFF",children:[(0,t.jsx)("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),(0,t.jsx)("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"})]})]})]})}),(0,t.jsxs)("div",{className:"no-data-description",children:[a,i]})]})}},4711:(e,a,s)=>{s.r(a),s.d(a,{default:()=>O});var t=s(6720),n=s(5043),i=s(6756),l=s(9992),o=s(184),r=s(8861),c=s(1486),d=s(4749),u=s(579);const h=e=>{var a;let{incomeCategories:s,expenseCategories:t,payees:i,onClose:h,onTransactionAdded:m}=e;const[p,x]=(0,n.useState)("Expense"),[v,g]=(0,n.useState)(""),[j,C]=(0,n.useState)((0,d.GP)(new Date,"yyyy-MM-dd'T'HH:mm")),[y,f]=(0,n.useState)(""),[N,b]=(0,n.useState)(null),[S,A]=(0,n.useState)(null),[w,k]=(0,n.useState)(!1);(0,n.useEffect)((()=>{!function(){if("Expense"===p){const e=t.find((e=>"General"===e.name));b((null===e||void 0===e?void 0:e.id)||null)}else if("Income"===p){const e=s.find((e=>"General"===e.name));b((null===e||void 0===e?void 0:e.id)||null)}else b(null)}()}),[p,s,t]);const E=null===(a="Expense"===p?t:s)||void 0===a?void 0:a.map((e=>({value:e.id,label:e.name}))),_=i.map((e=>({value:e.id,label:e.name})));return(0,u.jsx)("div",{className:"single-transaction-container",children:(0,u.jsxs)("div",{className:"edit-form",children:[(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{children:"Type"}),(0,u.jsxs)("select",{value:p,onChange:e=>x(e.target.value),className:"input",children:[(0,u.jsx)("option",{value:"Expense",children:"Expense"}),(0,u.jsx)("option",{value:"Income",children:"Income"})]})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{children:"Amount"}),(0,u.jsx)("input",{type:"number",value:v,onChange:e=>g(e.target.value),className:"input"})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{children:"Date"}),(0,u.jsx)("input",{type:"datetime-local",value:j,onChange:e=>C(e.target.value),className:"input"})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{children:"Description"}),(0,u.jsx)("textarea",{value:y,onChange:e=>f(e.target.value),className:"textarea",placeholder:"Description"})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{children:"Category"}),(0,u.jsx)(c.A,{options:E,value:E.find((e=>e.value===N)),onChange:e=>b(e.value),isSearchable:!0})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{children:"Payee"}),(0,u.jsx)(c.A,{options:_,value:_.find((e=>e.value===S)),onChange:e=>A(e.value),isSearchable:!0})]}),(0,u.jsxs)("div",{className:"button-group",children:[(0,u.jsx)(r.A,{onClick:h,text:"Cancel",icon:(0,u.jsx)(o.QCr,{}),variant:"info"}),(0,u.jsx)(r.A,{onClick:async()=>{v&&j&&N&&(k(!0),await(0,l.yY)({amount:parseFloat(v),description:y,transaction_timestamp:j,category_id:N,payee_id:S},{incomeCategories:s,expenseCategories:t,payees:i}),null===m||void 0===m||m(),null===h||void 0===h||h(),k(!1))},text:w?"Adding...":"Add",disabled:w,icon:(0,u.jsx)(o.OiG,{}),variant:"success"})]})]})})};var m=s(2024),p=s(3900),x=s(1794);const v=e=>{let{grouped:a,onTransactionClick:s,fadeOut:t}=e;return(0,u.jsx)("div",{className:"transaction-page-wrapper "+(t?"fade-out":""),children:Object.entries(a).map((e=>{let[a,t]=e;return(0,u.jsxs)("div",{className:"transaction-group",children:[(0,u.jsx)("h2",{className:"transaction-date-header",children:(0,i.Qm)(a)}),(0,u.jsx)("div",{className:"transaction-card-list",children:t.map((e=>(0,u.jsx)(x.A,{transaction:e,onCardClick:()=>s(e)},e.id)))})]},a)}))})},g=n.memo(v);var j=s(90),C=s(4624);const y=e=>{var a;let{incomeCategories:s,expenseCategories:t,payees:i,transaction:d,onClose:h,onTransactionUpdated:m}=e;const{id:p,type:x,amount:v,transaction_timestamp:g,description:j,category_id:C,payee_id:y,product_link:f}=d,[N,b]=(0,n.useState)(v),[S,A]=(0,n.useState)(j||""),[w,k]=(0,n.useState)(f||""),[E,_]=(0,n.useState)(g),[T,F]=(0,n.useState)(C),[M,D]=(0,n.useState)(y),H=null===(a="Expense"===x?t:s)||void 0===a?void 0:a.map((e=>({value:e.id,label:e.name}))),P=null===i||void 0===i?void 0:i.map((e=>({value:e.id,label:e.name}))),[O,z]=(0,n.useState)(!1);return(0,u.jsx)("div",{className:"single-transaction-container",children:(0,u.jsxs)("div",{className:"edit-form",children:[(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{children:"Amount"}),(0,u.jsx)("input",{type:"number",value:N,onChange:e=>b(e.target.value),className:"input"})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{children:"Date"}),(0,u.jsx)("input",{type:"datetime-local",value:E.slice(0,16),onChange:e=>_(e.target.value),className:"input"})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{children:"Description"}),(0,u.jsx)("textarea",{value:S,onChange:e=>A(e.target.value),className:"textarea",placeholder:"Description"})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{children:"Category"}),(0,u.jsx)(c.A,{options:H,value:H.find((e=>e.value===T)),onChange:e=>F(e.value)})]}),(0,u.jsx)("div",{className:"form-group",children:(0,u.jsx)(c.A,{options:P,value:P.find((e=>e.value===M)),onChange:e=>D(e.value)})}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{children:"Product Link"}),(0,u.jsx)("input",{type:"text",value:w,onChange:e=>k(e.target.value),className:"input",placeholder:"https://..."})]}),(0,u.jsxs)("div",{className:"button-group",children:[(0,u.jsx)(r.A,{onClick:async()=>{z(!0);const e={amount:N,description:S,transaction_timestamp:E,category_id:T,payee_id:M,product_link:w};null===m||void 0===m||m(),null===h||void 0===h||h(),await(0,l.AF)(p,e,{incomeCategories:s,expenseCategories:t,payees:i}),z(!1)},text:O?"Saving...":"Save",disabled:O,icon:(0,u.jsx)(o.dIn,{}),variant:"success"}),(0,u.jsx)(r.A,{onClick:h,text:"Cancel",icon:(0,u.jsx)(o.QCr,{}),variant:"info"})]}),(0,u.jsx)("div",{className:"delete-btn-group",children:(0,u.jsx)(r.A,{onClick:async()=>{window.confirm("Are you sure you want to delete this transaction?")&&(await(0,l.Uw)(p),null===m||void 0===m||m(),null===h||void 0===h||h())},text:"Delete",icon:(0,u.jsx)(o.qbC,{}),variant:"danger",fullWidth:!0})})]})})};var f=s(423),N=s(9657);const b=e=>{let{onSearchToggle:a,showSearch:s,onFilterToggle:t,showFilters:n,onAddTransaction:i}=e;const l=(0,N.Ub)({maxWidth:768});return(0,u.jsxs)("div",{className:"transaction-controls",children:[(0,u.jsxs)("div",{className:"left-buttons",children:[(0,u.jsx)(r.A,{icon:(0,u.jsx)(f.Mmj,{}),text:l?null:"Search Transactions",variant:"primary",onClick:a,ariaLabel:"Toggle search"}),(0,u.jsx)(r.A,{icon:(0,u.jsx)(f.oWz,{}),text:l?null:"Filter Transactions",variant:"primary",onClick:t,ariaLabel:"Toggle filters"})]}),(0,u.jsx)("div",{className:"right-button",children:(0,u.jsx)(r.A,{icon:(0,u.jsx)(f.pmv,{}),text:l?null:"Add Transaction",variant:"primary",onClick:i,ariaLabel:"Add transaction"})})]})},S=n.memo(b);var A=s(9570),w=s(8728);const k=e=>{let{showFilters:a,categoryOptions:s,selectedCategories:t,onCategoryChange:n,payeeOptions:i,selectedPayees:l,onPayeeChange:o}=e;return(0,u.jsx)(A.N,{children:a&&(0,u.jsxs)(w.P.div,{className:"filters-wrapper",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[(0,u.jsx)(c.A,{isMulti:!0,options:s,value:t,onChange:n,placeholder:"Filter by Categories",isSearchable:!0}),(0,u.jsx)(c.A,{isMulti:!0,options:i,value:l,onChange:o,placeholder:"Filter by Payees",isSearchable:!0})]})})},E=n.memo(k);var _=s(7540),T=s(7077),F=s(3536);const{INCOME_CACHE_KEY:M,EXPENSE_CACHE_KEY:D}=(0,i.hz)(),{PAYEE_CACHE_KEY:H}=(0,i.IH)(),{LAST_TRANSACTION_FETCH:P}=(0,i.RW)(),O=()=>{const[e,a]=(0,n.useState)(!0),[s,o]=(0,n.useState)(!1),[c,d]=(0,n.useState)({}),[x,v]=(0,n.useState)(!1),[f,N]=(0,n.useState)(""),[b,A]=(0,n.useState)([]),[k,O]=(0,n.useState)(null),[z,L]=(0,n.useState)([]),[I,V]=(0,n.useState)([]),[G,Y]=(0,n.useState)([]),[K,Q]=(0,n.useState)([]),[R,U]=(0,n.useState)([]),[W,B]=(0,n.useState)(!1),J=(0,n.useCallback)((()=>{B(!0),setTimeout((()=>{let e=[...b];if(f.trim()){e=new p.A(e,{keys:["description"],threshold:.3}).search(f.trim()).map((e=>e.item))}if(K.length>0){const a=K.map((e=>e.value));e=e.filter((e=>a.includes(e.category_id)))}if(R.length>0){const a=R.map((e=>e.value));e=e.filter((e=>a.includes(e.payee_id)))}const a=(0,F.groupBy)(e,"date");Object.keys(a).forEach((e=>{a[e]=a[e].sort(((e,a)=>new Date(a.transaction_timestamp)-new Date(e.transaction_timestamp)))})),d(a),v(!0),B(!1)}),150)}),[f,K,R,b]),q=(0,n.useCallback)((async()=>{o(!0);const e=await(0,l._r)();O(Date.now()),A(e),o(!1)}),[]),X=(0,n.useCallback)((async()=>[...await(0,T.r2)()].sort(((e,a)=>new Date(a.date)-new Date(e.date)))),[]);(0,n.useEffect)((()=>{(async()=>{a(!0);const[e,s,t]=await Promise.all([(0,_.Jt)(D),(0,_.Jt)(M),(0,_.Jt)(H)]),n=await X();V(e||[]),L(s||[]),Y(t||[]),A(n);const i=localStorage.getItem(P);if(i)O(Number(i));else{const e=Date.now();localStorage.setItem(P,e),O(e)}a(!1)})()}),[X,q]),(0,n.useEffect)((()=>{const e=setTimeout((()=>{J()}),250);return()=>clearTimeout(e)}),[f,K,R,b,J]);const Z=(0,n.useMemo)((()=>G.map((e=>({value:e.id,label:e.name})))),[G]),$=(0,n.useMemo)((()=>[{label:"Expense Categories",options:(I||[]).map((e=>({value:e.id,label:e.name})))},{label:"Income Categories",options:(z||[]).map((e=>({value:e.id,label:e.name})))}]),[I,z]),[ee,ae]=(0,n.useState)(!1),[se,te]=(0,n.useState)(null),[ne,ie]=(0,n.useState)(!1),le=async()=>{const e=await X();A(e)},[oe,re]=(0,n.useState)(!1),[ce,de]=(0,n.useState)(!1);return(0,u.jsxs)(m.A,{title:"Transactions",loading:e||!x,onRefresh:q,children:[(0,u.jsx)("div",{className:"sync-status",children:k&&(0,u.jsxs)("small",{className:"sync-time",children:[s&&(0,u.jsx)(t.MdSync,{className:"syncing-icon"})," Last synced:"," ",(0,i.gs)(k)]})}),(0,u.jsx)(S,{onSearchToggle:()=>re(!oe),showSearch:oe,onFilterToggle:()=>de(!ce),showFilters:ce,onAddTransaction:()=>{te(null),ae(!0)}}),(0,u.jsx)(E,{showFilters:ce,categoryOptions:$,selectedCategories:K,onCategoryChange:Q,payeeOptions:Z,selectedPayees:R,onPayeeChange:U}),oe&&(0,u.jsx)(w.P.div,{className:"search-bar-wrapper",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:(0,u.jsxs)("div",{className:"search-input-wrapper",children:[(0,u.jsx)("input",{type:"text",placeholder:"Search by description",value:f,onChange:e=>N(e.target.value),className:"search-bar",spellCheck:!1}),f&&(0,u.jsx)("span",{className:"search-clear-icon",onClick:()=>N(""),role:"button",tabIndex:0,"aria-label":"Clear search",title:"Clear search",onKeyDown:e=>("Enter"===e.key||" "===e.key)&&N(""),children:(0,u.jsx)(t.MdClose,{})})]})}),!e&&x&&0===Object.keys(c).length?(0,u.jsx)(C.A,{message:"No transactions found.",height:"100",width:"150",children:(0,u.jsx)("div",{style:{marginTop:"2px"},children:(0,u.jsx)(r.A,{icon:(0,u.jsx)(t.MdClose,{}),text:"Clear Filters",variant:"danger",onClick:()=>{N(""),Q([]),U([])}})})}):!e&&x&&(0,u.jsx)(g,{grouped:c,fadeOut:W,onTransactionClick:e=>{te(e),ae(!0)}}),(0,u.jsx)(j.A,{showModal:ee,modalFadeOut:ne,onClose:()=>ae(!1),children:null===se?(0,u.jsx)(h,{incomeCategories:z,expenseCategories:I,payees:[{id:null,name:"None"},...G],onClose:()=>ae(!1),onTransactionAdded:le}):(0,u.jsx)(y,{incomeCategories:z,expenseCategories:I,payees:[{id:null,name:"None"},...G],transaction:se,onClose:()=>{ie(!0),setTimeout((()=>{ae(!1),ie(!1)}),200)},onTransactionUpdated:le})})]})}}}]);
//# sourceMappingURL=949.fe142b29.chunk.js.map